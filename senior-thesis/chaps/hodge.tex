% !TEX root = ../thesis.tex

\documentclass[../thesis.tex]{subfiles}

\begin{document}

\chapter{A Little Hodge Theory} \label{chap:hodge}

\epigraph{Once we explicitely know a Mumford-Tate group, we can let it work for us.}
{---Moonen \cite[(5.5)]{moonen-mumford-tate-intro}}

In this chapter, we define the notion of a Hodge structure as well as some related groups (the Mumford--Tate group and the Hodge group). Our exposition follows Moonen's unpublished notes \cite{moonen-mumford-tate-intro,moonen-mumford-tate} and Lombardo's master's thesis \cite[Chapter~3]{lombardo-mumford-tate}. Throughout, we find motivation from geometry (and in particular the cohomology of complex varieties), but we will review cohomology only later.

\section{Hodge Structures}
Cohomology of a variety frequently comes with some extra structure. On the \'etale site, we will later get significant utility of the fact that \'etale cohomology is a Galois representaion. On the analytic site, the corresponding structure is called a ``Hodge structure.''

\subsection{Definition and Basic Properties}
Here is our defintion.
% The previous subsection mentioned that the cohomology $H^\bullet(X,\CC)$ of a complex projective variety $X$ admits a ``Hodge structure'' meaning that one has a decomposition
% \[H^n(X,\CC)\cong\bigoplus_{p+q=n}H^{p,q}\]
% where $H^{p,q}=\ov{H^{q,p}}$. What is interesting about this situation is that we begin with a $\QQ$-vector space $H^n(X,\CC)$, which then inherits the above decomposition only after base-change to $\CC$. This structure is what makes our complex-analytic cohomology interesting, so we give it a name.
\begin{definition}[Hodge structure]
	A \textit{$\QQ$-Hodge structure} is a finite-dimensional vector space $V\in\op{Vec}_\QQ$ such that $V_\CC$ admits a decomposition
	\[V_\CC=\bigoplus_{p,q\in\ZZ}V^{p,q}_\CC\]
	where $V^{p,q}_\CC=\ov{V^{q,p}_\CC}$. For fixed $m\in\ZZ$, if $V^{p,q}_\CC\ne0$ unless $p+q=m$, we say that $V$ is \textit{pure of weight $m$}. We let $\op{HS}_\QQ$ denote the category of $\QQ$-Hodge structures, where a morphism of Hodge structures is a linear map preserving the decomposition over $\CC$. In the sequel, it may be helpful to note that one can bring this definition down to $\ZZ$ as well.
\end{definition}
\begin{example}
	We give the ``Tate twist'' $\QQ(1)\coloneqq2\pi i\QQ$ a Hodge structure of weight $-2$ where the only nonzero entry is $\QQ(1)^{-1,-1}=\QQ(1)$.
\end{example}
\begin{example}
	Given a complex projective smooth variety $X$, the Betti cohomology $\mathrm H^n_{\mathrm B}(X,\QQ)$ admits a Hodge structure via the comparison isomorphisms: we find that
	\[\mathrm H^n_{\mathrm B}(X,\CC)\simeq\bigoplus_{p+q=n}\mathrm H^{p,q}(X),\]
	where $\mathrm H^{p,q}(X)\coloneqq\mathrm H^q(X,\Omega_{X/\CC}^p)$. This construction is even functorial: a morphism of complex projective smooth varieties $\varphi\colon X\to Y$ induces a morphism of Hodge structures $\varphi^*\colon\mathrm H^n_{\mathrm B}(Y,\QQ)\to\mathrm H^n_{\mathrm B}(X,\QQ)$.
\end{example}
% The category $\op{HS}_\QQ$ becomes a faithful rigid tensor abelian subcategory of $\op{Vec}_\QQ$, where the forgetful functor is able to act as a fiber functor. As such, Tannakian formalismso we expect $\op{HS}_\QQ$ should arise from representations of some group. Let's explain how this is done.
Perhaps one would like to check that the category $\mathrm{HS}_\QQ$ is abelian. The quickest way to do this is to realize $\mathrm{HS}_\QQ$ as a category of representations of some group. The relevant group is the Deligne torus.
\begin{notation}[Deligne torus]
	Let $\mathbb S\coloneqq\op{Res}_{\CC/\RR}\mathbb G_{m,\CC}$ denote the Deligne torus. We also let $w\colon\mathbb G_{m,\RR}\to\mathbb S$ denote the \textit{weight cocharacter} given by $w(r)\coloneqq r\in\CC$ on $\RR$-points.
\end{notation}
\begin{remark} \label{rem:concrete-deligne-torus}
	One can realize $\mathbb S$ more concretely as
	\[\mathbb S(R)=\left\{\begin{bmatrix}
		a & b \\ -b & a
	\end{bmatrix}\in{\op{GL}_2(R)}:a^2+b^2\in R^\times\right\},\]
	where $R$ is an $\mathbb R$-algebra. Indeed, there is a ring isomorphism from $R\otimes_\RR\CC$ to $\left\{\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}:a,b\in R\right\}$ by sending $1\otimes1\mapsto\begin{bsmallmatrix}
		1 \\ & 1
	\end{bsmallmatrix}$ and $1\otimes i\mapsto\begin{bsmallmatrix}
		1 \\ & -1
	\end{bsmallmatrix}$. For example, one can define two characters $z,\ov z\colon\mathbb S_\CC\to\mathbb G_{m,\CC}$ given by $z\colon\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}\mapsto a+bi$ and $\ov z\colon\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}\mapsto a-bi$ so that $(z,\ov z)$ is an isomorphism $\mathbb S_\CC\to\mathbb G_{m,\CC}^2$. Thus, the character group $X^*(\mathbb S)$ is a free $\ZZ$-module of rank $2$ with basis $\{z,\ov z\}$, and the action of complex conjugation $\iota\in\op{Gal}(\CC/\RR)$ simply swaps $z$ and $\ov z$.
\end{remark}
\begin{example}
	The following cocharacters of $\mathbb S$ will be helpful.
	\begin{itemize}
		\item We define the \textit{weight cocharacter} $w\colon\mathbb G_{m,\RR}\to\mathbb S$ given by $w(r)\coloneqq r\in\CC$ on $\RR$-points.
		\item We define the \textit{miniscule cocharacter} $\mu\colon\mathbb G_{m,\CC}\to\mathbb S_\CC$ given by $\mu(z)\coloneqq(z,1)$ on $\CC$-points.
	\end{itemize}
\end{example}
Here is the relevance of $\mathbb S$ to Hodge structures.
\begin{lemma} \label{lem:hodge-by-s}
	Fix some $V\in\op{Vec}_\QQ$. Then a Hodge structure on $V$ has equivalent data to a representation $h\colon\mathbb S\to\op{GL}(V)_\RR$.
\end{lemma}
\begin{proof}
	\Cref{rem:concrete-deligne-torus} informs us that the character group $X^*(\mathbb S)$ of group homomorphisms $\mathbb S\to\mathbb G_m$ is a rank-$2$ free $\ZZ$-module generated by $z\colon\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}\mapsto a+bi$ and $\ov z\colon\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}\mapsto a-bi$ on $\CC$-points.\footnote{Alternatively, note one has an isomorphism $(\CC\otimes_\RR\CC)^\times\cong\CC^\times\times\CC^\times$ by sending $(z,w)\mapsto z\otimes w$. Then these two characters are $(z,w)\mapsto z$ and $(z,w)\mapsto w$.} Without too many details, upon passing to the Hopf algebra, one is essentially looking for units in $\RR\left[a,b,\left(a^2+b^2\right)^{-1}\right]$, of which there are not many. Note that there is a Galois action by $\op{Gal}(\CC/\RR)$ on these two characters $\{z,\ov z\}$, given by swapping them. Let $\iota\in\op{Gal}(\CC/\RR)$ denote complex conjugation, for brevity.

	Now, a representation $h\colon\mathbb S\to\op{GL}(V)_\RR$ must have $V_\CC$ decompose into eigenspaces according to the characters $X^*(\mathbb S)$, so one admits a decomposition
	\[V_\CC=\bigoplus_{\chi\in X^*(\mathbb S)}V_\CC^\chi.\]
	However, one also needs $V_\CC^{\iota\chi}=\ov{V_\CC^\chi}$ because $\iota$ swaps $\{\chi,\iota\chi\}$. By Galois descent, this is enough data to (conversely) define a representation $h\colon\mathbb S\to\op{Gal}(V)_\RR$.

	To relate the previous paragraph to Hodge structures, we recall that $X^*(\mathbb S)$ is a rank-$2$ free $\ZZ$-module, so write $\chi_{p,q}\coloneqq z^{-p}\ov z^{-q}$ so that $\iota\chi_{p,q}=\chi_{q,p}$. Setting $V_\CC^{p,q}\coloneqq V_\CC^{\chi_{p,q}}$ now explains how to relate the previous paragraph to a Hodge structure, as desired.
\end{proof}
\begin{remark}
	The weight of a Hodge structure on some $V\in\op{HS}_\QQ$ can be read off of $h$ as follows: note the weight cocharacter $h\circ w$ equals the $(-m)$th power map if and only if the weight is $m$. 
\end{remark}
Thus, we see immediately the category $\mathrm{HS}_\QQ$ is abelian. Additionally, representation theory explains how to take tensor products and duals.
\begin{example}
	We see that $V\in\op{HS}_\QQ$ has $V^\lor$ inherit a Hodge structure by setting $(V^\lor)^{p,q}\coloneqq (V^{-p,-q})^\lor$.
\end{example}
\begin{example}
	We are now able to define the Tate twists $\QQ(n)\coloneqq\QQ(1)^{\otimes n}$, where negative powers indicates taking a dual. In particular, one can check that $\QQ(n)\otimes\QQ(m)=\QQ(n+m)$ for any $n,m\in\ZZ$.
\end{example}
\begin{notation}
	For any Hodge structure $V\in\op{HS}_\QQ$ and integer $m\in\ZZ$, we may write
	\[V(m)\coloneqq V\otimes\QQ(m).\]
\end{notation}

% \subsection{Hodge Classes}
We conclude this section by explaining one important application of Hodge structures.
\begin{definition}[Hodge class]
	Fix a $\QQ$-Hodge structure $V$. A \textit{Hodge class} of $V$ is an element of $V\cap V^{0,0}$.
\end{definition}
\begin{remark} \label{rem:hodge-class-by-s}
	Looking at the construction in the proof of \Cref{lem:hodge-by-s}, we see that $v\in V$ is a Hodge class if and only if it is fixed by the corresponding representation $h\colon\mathbb S\to\op{GL}(V)_\RR$.
\end{remark}
\begin{example}
	Fix a complex projective smooth variety $X$ of dimension $n$ and some even nonnegative integer $2p\ge0$. Then one has Hodge classes given by elements of
	\[\mathrm H^{2p}_{\mathrm B}(X,\QQ)\cap\mathrm H^{p,p}(X)(p).\]
	Now, any algebraic subvariety $Z\subseteq X$ of codimension $k$ defines a linear functional on $\mathrm H^{2n-2k}_{\mathrm{dR}}(X,\CC)$ defined by
	\[\omega\mapsto\int_Z\omega,\]
	which one can check is supported on $\mathrm H^{k,k}$. Thus, by Poincar\'e duality, one finds that $Z$ produces a Hodge cycle in $\mathrm H^{2k}_{\mathrm B}(X,\QQ)$.
\end{example}
In light of the above example, one has the following conjecture.
\begin{conj}[Hodge] \label{conj:hodge}
	Fix a complex projective smooth variety $X$. Then any Hodge class can be written as a linear combination of classes arising from algebraic subvarieties.
\end{conj}
\begin{remark}
	Here are some remarks on what is known about the Hodge conjecture, though it is admittedly little in this level of generality.
	\begin{itemize}
		\item The Hodge classes in $\mathrm H_{\mathrm B}^2(X)(1)$ come from algebraic subvarieties.
		\item The cup product of any two classes arising from algebraic subvarieties continues to be Hodge and arises from algebraic subvarieties.
	\end{itemize}
	For example, if one can show that all Hodge classes are cup products of Hodge classes of codimension $1$ on a variety $X$, then one knows the Hodge conjecture for $X$.
\end{remark}
We are not interested in proving (cases of) the Hodge conjecture in this thesis, so we will not say much more.

% \section{Polarizations}
% In this section, we discuss polarizations of Hodge structures and give a few applications.

\subsection{Polarizations}
Here is an important example of a morphism of Hodge structures.
\begin{definition}[polarization] \label{def:polarization}
	Fix a Hodge structure $V\in\mathrm{HS}_\QQ$ pure of weight $m$ given by the representation $h\colon\mathbb S\to\op{GL}(V)_\RR$. A \textit{polarization} on $V$ is a morphism $\varphi\colon V\otimes V\to\QQ(-m)$ of Hodge structures such that the induced bilinear form on $V_\RR$ given by
	\[\langle v,w\rangle\coloneqq(2\pi i)^m\varphi(h(i)v\otimes w)\]
	is symmetric and positive-definite. If $V$ admits a polarization, we may say that $V$ is \textit{polarizable}, and we let $\op{HS}_\QQ^{\mathrm{pol}}\subseteq\op{HS}_\QQ$ be the full subcategory of polarizable $\QQ$-Hodge structures.
\end{definition}
\begin{remark} \label{rem:polarization-non-degenerate}
	The positive-definiteness condition on $\langle\cdot,\cdot\rangle$ implies that $\varphi$ is non-degenerate. Indeed, one may check non-degeneracy upon base-changing to $\RR$ (because this is equivalent to inducing an isomorphism of vector spaces $V\to V^\lor$, which can be checked by fixing some $\QQ$-bases and computing a determinant). Then we see that $\langle\cdot,\cdot\rangle$ being non-degenerate implies that
	\[\varphi(v\otimes w)=(2\pi i)^{-m}\langle h(-i)v,w\rangle\]
	is non-degenerate because $h(-i)\colon V\to V$ is an isomorphism of vector spaces (because $h(-i)^4=\id_V$).
\end{remark}
\begin{remark}
	The symmetry condition on $\langle\cdot,\cdot\rangle$ implies a symmetry or alternating condition on $\varphi$. Indeed, we compute
	\begin{align*}
		\varphi(v\otimes w) &= (2\pi i)^{-m}\langle h(-i)v,w\rangle \\
		&= (2\pi i)^{-m}\langle w,h(-i)v\rangle \\
		&= \varphi(h(i)w\otimes h(-i)v) \\
		&= h_{\QQ(-m)}(i)\varphi(w\otimes h(-1)v) \\
		&= 1\varphi\left(w\otimes(-1)^mw\right) \\
		&= (-1)^m\varphi(w\otimes v).
	\end{align*}
	Thus, $\varphi$ is symmetric when $m$ is even, and $\varphi$ is alternating when $m$ is odd.
\end{remark}
Let's give some constructions of polarizable Hodge structures.
\begin{example} \label{ex:av-polarizable-hs}
	It will turn out that $\mathrm H^1_{\mathrm B}(A,\QQ)$ of any abelian variety $A$ (over $\CC$) is polarizable, explaining the importance of this notion for our application. Because we are reviewing abelian varieties in \cref{chap:av}, we will not say more here.
\end{example}
\begin{example} \label{ex:polarize-subspace}
	If $V$ is polarizable and pure of weight $m$, then any Hodge substructure $W\subseteq V$ is still polarizable (and pure of weight $m$). Indeed, one can simply restrict the polarization to $W$, and all the checks go through. For example, positive-definiteness of $\langle\cdot,\cdot\rangle$ means $\langle v,v\rangle>0$ for all nonzero $v\in V$, so the same will be true upon restricting to $W$.
\end{example}
\begin{example} \label{ex:polarize-sum}
	If $V$ and $W$ are polarizable and pure of weight $m$, then $V\oplus W$ is also polarizable. Indeed, letting $\varphi$ and $\psi$ be polarizations on $V$ and $W$ respectively, we see that $(\varphi\oplus\psi)$ defined by
	\[(\varphi\oplus\psi)((v,w),(v',w'))\coloneqq\varphi(v,v')+\psi(w,w')\]
	succeeds at being a polarization: certainly it is a morphism of Hodge structures to $\QQ(-m-n)$, and one can check that the corresponding bilinear form on $V\oplus W$ simply splits into a sum of the forms on $V$ and $W$ and is therefore symmetric and positive-definite.
\end{example}
\begin{example}
	If $V$ and $W$ are polarizable and pure of weights $m$ and $n$ respectively, then $V\otimes W$ is also polarizable. Indeed, as in \Cref{ex:polarize-sum}, let $\varphi$ and $\psi$ be polarizationson $V$ and $W$ respectively, and then we find that $(\varphi\otimes\psi)$ can be defined on pure tensors by
	\[(\varphi\otimes\psi)(v\otimes w,v'\otimes w')\coloneqq\varphi(v,v')\psi(w,w').\]
	One checks as before that this gives a polarization on $V\otimes W$: we certainly have a morphism of Hodge structures, and the corresponding bilinear form is the product of the bilinear forms on $V$ and $W$ and is therefore symmetric and positive-definite.
\end{example}
\begin{example} \label{ex:complement-hodge-structure}
	If $V$ is polarizable and pure of weight $m$ with polarization $\varphi$, and $W\subseteq V$ is a Hodge substructure (which is polarizable by \Cref{ex:polarize-subspace}), then we claim $W^\perp$ (taken with respect to $\langle\cdot,\cdot\rangle$) is also a Hodge substructure and hence polarizable by \Cref{ex:polarize-subspace}. Well, for any $w'\in W_\RR^\perp$ and $z\in\mathbb S(\RR)$, we must check that $h(z)w'\in W_\RR^\perp$. For this, we note that any $w\in W$ has
	\begin{align*}
		\langle w,h(z)w'\rangle &= (2\pi i)^{-m}\varphi(h(i)w\otimes h(z)w') \\
		&= h_{\QQ(-m)}(1/z)(2\pi i)^{-m}\varphi(h(i/z)w\otimes w') \\
		&= h_{\QQ(-m)}(1/z)\langle h(i/z)w, w'\rangle \\
		&= 0,
	\end{align*}
	where the last equality holds because $W\subseteq V$ is a Hodge substructure.
\end{example}
Note that one does not expect any Hodge substructure to have a complement, so \Cref{ex:complement-hodge-structure} is a very important property of polarizations.
% Here is the key reason to introduce polarizations.
% \begin{proposition} \label{prop:polarization-gives-reductive}
% 	Fix a polarizable Hodge structure $V\in\op{HS}_\QQ$ pure of weight $m$. Then $\op{MT}(V)$ and $\op{Hg}(V)$ are both reductive.
% \end{proposition}
% \begin{proof}
% 	There is a faithful semisimple representation.\todo{}
% \end{proof}

\subsection{The Albert Classification}
The presence of a polarization places strong restrictions on the endomorphisms of a Hodge structure. To explain how this works, we begin by reducing to the irreducible case: given a polarizable Hodge structure $V\in\op{HS}_\QQ$, we begin by noting that $V$ can be decomposed into irreducible Hodge substructures
\[V=\bigoplus_{i=1}^NV_i^{\oplus m_i},\]
where $V_i$ is an irreducible Hodge structure (i.e., an irreducible representation of $\mathbb S$) and $m_i\ge0$ is some nonnegative integer. Then standard results on endomorphisms of representations tell us that
\[\op{End}_{\op{HS}}(V)=\bigoplus_{i=1}^NM_{m_i}(\op{End}_{\op{HS}}(V_i)),\]
and Schur's lemma implies that $\op{End}_{\op{HS}}(V_i)$ is a division algebra. The point of the above discussion is that we may reduce our discussion of endomorphisms to irreducible Hodge structures. We remark that polarizability of $V$ implies that irreducible Hodge substructures continue to be polarizable by \Cref{ex:polarize-subspace}.

We are thus interested in classifying what algebras may appear as $\op{End}_{\op{HS}}(V)$ for irreducible Hodge structures $V\in\op{HS}_\QQ$. To this end, we note that $\op{End}_{\op{HS}}(V)$ comes with some extra structure.
\begin{definition}[Rosati involution]
	Let $\varphi$ be a polarization on a Hodge structure $V\in\op{HS}_\QQ$. The \textit{Rosati involu\-tion} is the function $(\cdot)^\dagger\colon\op{End}_{\QQ}(V)\to\op{End}_{\QQ}(V)$ defined by
	\[\varphi(dv\otimes w)=\varphi(v\otimes d^\dagger w)\]
	for all $d\in\op{End}_{\op{HS}}(V)$ and $v,w\in V$.
\end{definition}
\begin{remark} \label{rem:rosati-is-adjoint}
	In light of \Cref{rem:polarization-non-degenerate}, we see that $d^\dagger$ is simply the adjoint of $d\colon V\to V$ associated to $\varphi$ viewed as a non-degenerate bilinear pairing. For example, we immediately see that $(\cdot)^\dagger$ induces a well-defined linear operator $\op{End}_\QQ(V)\to\op{End}_\QQ(V)$.
	% Let $h\colon\mathbb S\to\op{GL}(V)_\RR$ be the representation associated to $V$. Equivalently, we see that we are asking for
	% \[(2\pi i)^{-m}\langle h(i)dv,w\rangle=(2\pi i)^{-m}\langle h(i)v,d^\dagger w\rangle\]
	% for all $d\in\op{End}_{\op{HS}}(V)$ and $v,w\in V_\RR$. This equality rearranges into
	% \[\langle dv,w\rangle=\langle v,d^\dagger w\rangle\]
	% because $d$ commutes with $h(i)$. We thus see that $d^\dagger$ is simply the adjoint of $d$ with respect to the symmetric positive-definite form $\langle\cdot,\cdot\rangle$. In particular, it is well-defined and linear, and $d^{\dagger\dagger}=d$.
\end{remark}
Here are the important properties of the Rosati involution.
\begin{lemma}
	Fix a Hodge structure $V\in\op{HS}_\QQ$ pure of weight $m$ with polarization $\varphi$ and associated Rosati involution $(\cdot)^\dagger$.
	\begin{listalph}
		\item If $d\in\op{End}_{\op{HS}}(V)$, then $d^\dagger\in\op{End}_{\op{HS}}(V)$.
		\item Anti-involution: for any $d,e\in\op{End}_{\QQ}(V)$, we have $d^{\dagger\dagger}=d$ and $(de)^\dagger=e^\dagger d^\dagger$.
		\item Positive: for any nonzero $d\in\op{End}_{\QQ}(V)$, we have $\tr dd^\dagger>0$.
	\end{listalph}
\end{lemma}
\begin{proof}
	We show the claims in sequence.
	\begin{listalph}
		\item This follows because $\varphi$ is a morphism of Hodge structures. Formally, we would like to check that $d^\dagger$ commutes with the action of $\mathbb S$. Let $h\colon\mathbb S\to\op{GL}(V)_\RR$ be the representation corresponding to the Hodge structure. Well, for any $g\in\mathbb S(\CC)$ and $v,w\in V$, we compute
		\begin{align*}
			\varphi(v\otimes d^\dagger h(g)w) &= \varphi(dv\otimes h(g)w) \\
			&= h_{\QQ(-m)}(g)\varphi\left(h(g^{-1})dv\otimes w\right) \\
			&\stackrel*= h_{\QQ(-m)}(g)\varphi\left(dh(g^{-1})v\otimes w\right) \\
			&= h_{\QQ(-m)}(g)\varphi\left(h(g^{-1})v\otimes d^\dagger w\right) \\
			&= \varphi(v\otimes h(g)d^\dagger w)
		\end{align*}
		where $\stackrel*=$ holds because $d$ is a morphism of Hodge structures. The non-degeneracy of $\varphi$ given in \Cref{rem:polarization-non-degenerate} now implies that $d^\dagger h(g)=h(g)d^\dagger$, so we are done.
		\item This is a purely formal property of adjoints.
		\item The point is to reduce this to the case where $V$ is a matrix algebra over $\RR$ and $(\cdot)^\dagger$ is the transpose. Indeed, this positivity can be checked after a base-change to $\RR$. As such, we let $\langle\cdot,\cdot\rangle$ be the symmetric positive-definite bilinear form assocated to $\varphi$ defined by
		\[\langle v,w\rangle\coloneqq(2\pi i)^{-m}\varphi(h(i)v\otimes w)\]
		for any $v,w\in V_\RR$. We thus see that $(\cdot)^\dagger$ is also the adjoint operator with respect to $\langle\cdot,\cdot\rangle$: we know
		\[(2\pi i)^{-m}\langle h(i)dv,w\rangle=(2\pi i)^{-m}\langle h(i)v,d^\dagger w\rangle\]
		for any $v,w\in V_\RR$, which is equivalent to always having $\langle dv,w\rangle=\langle v,d^\dagger w\rangle$. Now, we may fix an orthornomal basis of $V_\RR$ with respect to $\langle\cdot,\cdot\rangle$ so that $\op{End}_\RR(V_\RR)$ is identified with $M_n(\RR^{\dim V})$ and $(\cdot)^\dagger$ is identified with the transpose. Then $\tr dd^\intercal$ is the sum of the squares of the matrix entries of $d$ and is therefore positive when $d$ is nonzero.
		\qedhere
	\end{listalph}
\end{proof}
We are now ready to state the Albert classification, which classifies division algebras over $\QQ$ equipped with a positive anti-involution.
\begin{theorem}[Albert classification] \label{thm:albert-classification}
	Let $D$ be a division algebra over $\QQ$ equipped with a Rosati involution $(\cdot)^\dagger\colon D\to D$. Further, let $F$ be the center of $D$, and let $F^\dagger$ be the subfield fixed by $(\cdot)^\dagger$. Then $D$ admits exactly one of the following types.
	\begin{itemize}
		\item Type I: $D$ is a totally real number field so that $D=F=F^\dagger$, and $(\cdot)^\dagger$ is the identity.
		\item Type II: $D$ is a totally indefinite quaternion division algebra over $F$ where $F=F^\dagger$, and $(\cdot)^\dagger$ corresponds to the transpose on $D\otimes_\QQ\RR\cong M_2(\RR)$.
		\item Type III: $D$ is a totally definite quaternion division algebra over $F$ where $F=F^\dagger$, and $(\cdot)^\dagger$ corresponds to the canonical involution on $D\otimes_\QQ\RR\cong\HH$ (where $\HH$ is the quaternions).
		\item Type IV: $D$ is a division algebra over $F$, where $F$ is a totally imaginary quadratic extension of $F^\dagger$, and $(\cdot)^\dagger$ is the complex conjugation automorphism of $F$. In other words, $F$ is a CM field, and $F^\dagger$ is the maximal totally real subfield.
	\end{itemize}
\end{theorem}
\begin{proof}
	This is a rather lengthy computaion. We refer to \cite[Section~21, Application I]{mumford-abelian-varieties}.
\end{proof}
% \todo{}
% rosati involution
% state albert classification

\section{Monodromy Groups}
In this section, we define the Mumford--Tate group and the Hodge group.

\subsection{The Mumford--Tate Group}
We are now ready to define the Mumford--Tate group. Intuitively, it is the monodromy group of the associated representation of a Hodge structure.
\begin{definition}[Mumford--Tate group]
	For some $V\in\op{HS}_\QQ$, the \textit{Mumford--Tate group} $\op{MT}(V)$ is the smallest algebraic $\QQ$-group containing the image of the corresponding representation $h\colon\mathbb S\to\op{GL}(V)_\RR$.
\end{definition}
\begin{remark} \label{rem:mt-connected}
	Because $\mathbb S$ is connected, we see that $h$ is also connected. Namely, $\op{MT}(V)^\circ\subseteq\op{MT}(V)$ will be an algebraic $\QQ$-group containing the image of $h$ if $\op{MT}(V)$ does too, so equality is forced.
\end{remark}
\begin{example} \label{ex:mt-has-scalars}
	Suppose that $V\in\op{HS}_\QQ$ is pure of weight $m$.
	\begin{itemize}
		\item If $m=0$, then we claim that $\op{MT}(V)\subseteq\op{SL}(V)$. It is enough to check that $h$ outputs into $\op{SL}(V)$. 
		\item If $m\ne0$, then we claim that $\op{MT}(V)$ contains $\mathbb G_{m,\QQ}$. It is enough to check that $\op{MT}(V)_\CC$ contains $\mathbb G_{m,\CC}$. Well, for any $z\in\CC$ $h(z,\ov z)$ acts on the component $V^{p,q}\subseteq V_\CC$ by $z^{-p}z^{-q}=z^{-m}$, so $\op{MT}(V)_\CC$ must contain the scalar $z^{-m}$ for all $z\in\CC$. The conclusion follows.
	\end{itemize}
\end{example}
Because Hodge structures are defined after passing to $\CC$, it will be helpful to have a definition of $\op{MT}(V)$ as a monodromy group corresponding to a morphism over $\CC$.
\begin{lemma} \label{lem:mt-as-monodromy-c}
	Fix $V\in\op{HS}_\QQ$, and let $h\colon\mathbb S\to\op{GL}(V)_\RR$ be the corresponding representation. Then $\op{MT}(V)$ is the smallest algebraic $\QQ$-subgroup of $\op{GL}(V)$ such that $\op{MT}(V)_\CC$ contains the image of $h_\CC\circ\mu$.
\end{lemma}
\begin{proof}
	Let $M'$ be the smallest algebraic $\QQ$-subgroup of $\op{GL}(V)$ containing $h_\CC\circ\mu$. We want to show that $M'=M$.
	\begin{itemize}
		\item To show $M'\subseteq\op{MT}(V)$, we must show that $\op{MT}(V)_\CC$ contains the image of $h_\CC\circ\mu$. Well, $\op{MT}(V)_\RR$ contains the image of $h$, so $\op{MT}(V)_\CC$ contains the image of $h_\CC$, which contains the image of $h_\CC\circ\mu$.

		\item Showing $\op{MT}(V)\subseteq M'$ is a little harder. We must show that $M'$ contains the image of $h\colon\mathbb S\to\op{GL}(V)_\RR$. It is enough to check that $M'$ contains the image of $h_\CC$ because then we can descend everything to $\RR$, and because $\CC$ is algebraically closed, we see that $\CC$-points are certainly dense enough so that it is enough to chek that $M'(\CC)$ contains the image $h(\mathbb S(\CC))$.
		
		The point is that $M'$ is defined over $\QQ$, so $M'_\CC$ is stable under the action of complex conjugation, which we denote by $\iota$. Similarly, $h$ being defined over $\RR$ guarantees that it commutes with complex conjugation. In particular, we already know that $M'$ contains the points of the form $h(z,1)$ for $(z,1)\in\mathbb S(\CC)$. Thus, we see that $M'$ also contains the points
		\[\iota(h(z,1))=h(\iota(z,1))=h(1,z)\]
		because everything is defined over $\RR$. (This last equality follows by tracking through the action of $\iota$ on $\mathbb S(\CC)$.) We conclude that $M'$ contains $h(z,w)$ for any $(z,w)\in\mathbb S(\CC)$, so we are done.
		\qedhere
	\end{itemize}
\end{proof}
Roughly speaking, the point of the group $\op{MT}(V)$ is that $\op{MT}(V)$ is an algebraic $\QQ$-group remembering everything one wants to know about the Hodge structure. One way to rigorize this is as follows.
\begin{proposition} \label{prop:tensors-of-mt}
	Fix $V\in\op{HS}_\QQ$. Suppose $T\in\op{HS}_\QQ$ can be written as
	\[T=\bigoplus_{i=1}^N\left(V^{\otimes m_i}\otimes (V^\lor)^{\otimes n_i}\right),\]
	where $m_i,n_i\ge0$ are nonnegative integers. Then $W\subseteq T$ is a Hodge substructure if and only if the action of $\op{MT}(V)$ on $T$ stabilizes $W$.
\end{proposition}
\begin{proof}
	For each $W\in\op{HS}_\QQ$, we let $h_W$ denote the corresponding representation. In the backwards direction, we note that $\op{MT}(V)$ stabilizing $W$ implies that $h(s)$ stabilizes $W_\RR$ for any $s$. We can thus view $W_\RR\subseteq T_\RR$ as a subrepresentation of $\mathbb S$, so taking eigenspaces reveals that $W$ can be given the structure of a Hodge substructure of $T$.

	The converse will have to use the construction of $T$. Indeed, suppose that $W\subseteq T$ is a Hodge substructure, and let $M\subseteq\op{GL}(V)$ be the smallest algebraic $\QQ$-group stabilizing $W\subseteq T$. We would like to show that $\op{MT}(V)\subseteq M$. By definition of $\op{MT}(V)$, it is enough to show that $h$ factors through $M_\RR$, meaning we must show that $h(s)$ stabilizes $W$ for each $s\in\mathbb S$. Well, $h(s)$ will act by characters on the eigenspaces $W^{p,q}_\CC\subseteq W_\CC$, so $h(s)$ does indeed stabilize $W$.
\end{proof}
\begin{corollary} \label{cor:hodge-classes-by-mt}
	Fix $V\in\op{HS}_\QQ$. Suppose $T\in\op{HS}_\QQ$ can be written as
	\[T=\bigoplus_{i=1}^N\left(V^{\otimes m_i}\otimes (V^\lor)^{\otimes n_i}\right),\]
	where $m_i,n_i\ge0$ are nonnegative integers. Then $t\in T$ is a Hodge class if and only if it is fixed by $\op{MT}(V)$.
\end{corollary}
\begin{proof}
	We apply \Cref{prop:tensors-of-mt} to $\QQ(0)\oplus T$. Then we note that $\op{span}_\QQ\{(1,t)\}\subseteq\QQ(0)\oplus T$ is a Hodge substructure if and only if it is preserved by $\op{MT}(V)$. We now tie each of these to the statement.
	\begin{itemize}
		\item On one hand, we see that being a one-dimensional Hodge substructure implies that $(1,t)$ must have bidegree $(p,p)$ for some $p\in\ZZ$, but we have to live in $(0,0)$ because our $1$ lives in $\QQ(0)$. Thus, this is equivalent to being a Hodge class.
		\item On the other hand, being preserved by $\op{MT}(V)$ implies that $\op{MT}(V)$ acts by scalars on $(1,t)$, but $\op{MT}(V)$ acts trivially on $\QQ(0)$, so all the relevant scalars must be $1$. Thus, this is equivalent to being fixed by $\op{MT}(V)$.
		\qedhere
	\end{itemize}
\end{proof}
We thus see that understanding the Mumford--Tate group is important from the perspective of the Hodge conjecture (\Cref{conj:hodge}). It will be helpful to note that this characterizes $\op{MT}(V)$ in some cases.
\begin{proposition} \label{prop:reductive-group-by-invariants}
	Fix a field $k$ of characteristic $0$. Let $H\subseteq\op{GL}_{n,k}$ be a reductive subgroup. Suppose $H'$ is the algebraic $\QQ$-subgroup of $\op{GL}_{n,k}$ defined by fixing all $H$-invariants occuring in any tensor representation
	\[T=\bigoplus_{i=1}^N\left(V^{\otimes m_i}\otimes (V^\lor)^{\otimes n_i}\right),\]
	where $m_i,n_i\ge0$ are nonnegative integers. Then $H=H'$.
\end{proposition}
\begin{proof}
	Note $H\subseteq H'$ is automatic, so the main content comes from proving the other inclusion. Proving this would step into the (rather deep) theory of algebraic groups, which we will avoid. Instead, we will mention that the key input is Chevalley's theorem, which asserts that any subgroup $H$ of $G$ is the stabilizer of some line in some representation of $G$. We refer to \cite[Proposition~3.1]{deligne-hodge}; see also \cite[Theorem~4.27]{milne-alg-groups}.
\end{proof}
\begin{corollary} \label{cor:mt-by-classes}
	Fix $V\in\op{HS}_\QQ$ such that $\op{MT}(V)$ is reductive. Then $\op{MT}(V)$ is exactly the algebraic $\QQ$-subgroup of $\op{GL}(V)$ fixing all Hodge classes.
\end{corollary}
\begin{proof}
	\Cref{cor:hodge-classes-by-mt} explains that the Hodge classes are exactly the vectors fixed by $\op{MT}(V)$, so this follows from \Cref{prop:reductive-group-by-invariants}.
\end{proof}
\begin{remark}
	\Cref{cor:mt-by-classes} is true without a reductivity assumption (see \cite[Proposition~3.4]{deligne-hodge}), but we will not need this in our applications. (On the other hand, one does not expect \Cref{prop:reductive-group-by-invariants} to be true without any assumptions on $H$.) Namely, we will be interested in abelian varieties, whose Hodge structures are polarizable by \Cref{ex:av-polarizable-hs}, and we will shortly see that this implies that $\op{MT}(V)$ is reductive in \Cref{lem:mt-hg-reductive}.
\end{remark}

\subsection{The Hodge Group}
In computational applications, it will be frequently be easier to compute a smaller monodromy group related to $\op{MT}(V)$.
\begin{definition}[Hodge group]
	Fix $V\in\op{HS}_\QQ$ of pure weight. Then the \textit{Hodge group} $\op{Hg}(V)$ is the smallest algebraic $\QQ$-subgroup $\op{GL}(V)$ containing the image of $h|_{\mathbb U}$, where $\mathbb U\subseteq\mathbb S$ is defined as the kernel of the norm character $z\ov z\colon\mathbb S\to\mathbb G_{m,\RR}$.
\end{definition}
\begin{remark}
	Even though $z$ and $\ov z$ are only defined as characters $\mathbb S_\CC\to\mathbb G_{m,\CC}$, the norm character $z\ov z$ is defined as a character $\mathbb S\to\mathbb G_{m,\RR}$ because it is fixed by complex conjugation. For example, we see that
	\[\mathbb U(\RR)=\{z\in\CC:\left|z\right|=1\}.\]
	Thus, we see that $\mathbb U$ stands for ``unit circle.'' While we're here, we remark that $\mathbb U(\CC)\subseteq\mathbb S(\CC)$ is identified with the subset $\left\{(z,1/z):z\in\CC^\times\right\}$.
\end{remark}
\begin{remark} \label{rem:hg-connected}
	The same argument as in \Cref{rem:mt-connected} shows that the connectivity of $\mathbb U$ implies the connectivity of $\op{Hg}(V)$.
\end{remark}
Intuitively, $\op{Hg}(V)$ removes the scalars that might live in $\op{MT}(V)$ by \Cref{ex:mt-has-scalars}. These scalars are an obstruction to $\op{MT}(V)$ being a semisimple group, and we will see in \Cref{prop:hodge-semisimple-not-type-iv} that $\op{Hg}(V)$ will thus frequently succeed at being semisimple. Let's rigorize this discusison.
\begin{lemma} \label{lem:mt-by-hg}
	Fix $V\in\op{HS}_\QQ$ pure of weight $m$, and let $h\colon\mathbb S\to\op{GL}(V)_\RR$ be the corresponding representation.
	\begin{listalph}
		\item We have $\op{Hg}(V)\subseteq\op{SL}(V)$.
		% For $z\in\mathbb S(\RR)$, we have
		% \[\det h(z)=(z\ov z)^{-\frac12m\dim V}.\]
		% \item We have
		% \[\op{Hg}(V)=\op{MT}(V)\cap\op{SL}(V).\]
		\item Thus,
		\[\op{MT}(V)=\begin{cases}
			\op{Hg}(V) & \text{if }m=0, \\
			\mathbb G_{m,\QQ}\op{Hg}(V) & \text{if }m\ne0,
		\end{cases}\]
		where the almost direct product in the second case is given by embedding $\mathbb G_{m,\QQ}\to\op{GL}(V)$ via scalars.
	\end{listalph}
\end{lemma}
\begin{proof}
	We show the claims in sequence.
	\begin{listalph}
		\item It is enough to check that $\op{SL}(V)$ contains the image of $h|_{\mathbb U}$. In other words, we want to check that $\det h(z)=1$ for all $z\in\mathbb U(\RR)$. By extending scalars, it is enough to compute the determinant as an operator on $V_\CC$. For this, we note that $h(z)$ acts on the component $V^{p,q}\subseteq V_\CC$ by the scalar $z^{-p}\ov z^{-q}$, so the determinant of $h(z)$ acting on $V^{p,q}\oplus V^{q,p}$ is
		\[\left(z^{-p}\ov z^{-q}\right)^{\dim V^{p,q}}\cdot\left(z^{-q}\ov z^{-p}\right)^{\dim V^{q,p}}=(z\ov z)^{-(p+q)\dim V^{p,q}}\]
		because $\dim V^{p,q}=\dim V^{q,p}$. This simplifies to $(z\ov z)^{-\frac12m\dim(V^{p,q}\oplus V^{q,p})}$ because $V$ is pure of weight $m$, so the result follows by summing over all pairs $(p,q)$.\footnote{If $m$ is even, this argument does not work verbatim for the component $(m/2,m/2)$. Instead, one can compute the determinant of $h(z)$ acting on $V^{m/2,m/2}$ directly as $(z\ov z)^{-\frac12m\dim V^{m/2,m/2}}$.}

		\item Before doing anything serious, we remark that $\mathbb G_{m,\QQ}\op{Hg}(V)$ is in fact an almost direct product. Namely, we should check that the intersection $\mathbb G_{m,\QQ}\cap\op{Hg}(V)$ is finite (even over $\CC$). Well, by (a), $\op{Hg}(V)\subseteq\op{SL}(V)$. Thus, it is enough to notice that $\mathbb G_{m,\QQ}\cap\op{SL}(V)$ is finite because $V$ is finite-dimensional over $\CC$: over $\CC$, the intersection consisits of scalar matrices $\lambda\id_V$ such that $\lambda^{\dim V}=1$, so the intersefction is the finite algebraic group $\mu_{\dim V}$.
		
		We now proceed with the argument. Because $\mathbb U\subseteq\mathbb S$, we of course have $\op{Hg}(V)\subseteq\op{MT}(V)$, and if $m\ne0$, then \Cref{ex:mt-has-scalars} implies that $\mathbb G_{m,\QQ}\subseteq\op{MT}(V)$ so that $\mathbb G_{m,\QQ}\op{Hg}(V)\subseteq\op{MT}(V)$. It is therefore enough to check the given equalities after base-changing to $\RR$. Namely, using \Cref{lem:mt-as-monodromy-c}, we should check that $\op{Hg}(V)(\CC)$ contains the image of $h_\CC\circ\mu$ when $m=0$, and $\CC^\times\op{Hg}(V)(\CC)$ contains the image of $h_\CC\circ\mu$ when $m\ne0$. Well, for any $z\in\CC^\times$, we may write $z=re^{i\theta}$ where $r\in\RR^+$ and $\theta\in\RR$. Then we compute
		\begin{align*}
			h(\mu(z)) &= h(z,1) \\
			&= h\left(re^{i\theta},1\right) \\
			&= h\left(\sqrt re^{i\theta/2},\sqrt re^{-i\theta/2}\right)h\left(\sqrt re^{i\theta/2},\frac1{\sqrt re^{i\theta/2}}\right).
		\end{align*}
		Now, $h\left(\sqrt re^{i\theta/2},\sqrt re^{-i\theta/2}\right)$ is a scalar as computed in \Cref{ex:mt-has-scalars}, and $\left(\sqrt re^{i\theta/2},\frac1{\sqrt re^{i\theta/2}}\right)$ lives in $\mathbb U(\CC)=\{(z,w):zw=1\}$. Thus, we see that $h(\mu(z))$ is certainly contained in $\CC^\times\op{Hg}(V)(\CC)$, completing the proof in the case $m\ne0$. In the case where $m=0$, the scalar $h\left(\sqrt re^{i\theta/2},\sqrt re^{-i\theta/2}\right)$ is actually the identity, so we see that $h(\mu(z))\in\op{Hg}(V)(\CC)$.
		\qedhere
	\end{listalph}
\end{proof}
It is worthwhile to note that there is also a tensor characterization of $\op{Hg}(V)$.
\begin{proposition} \label{prop:tensors-of-hg}
	Fix $V\in\op{HS}_\QQ$ of pure weight. Suppose $T\in\op{HS}_\QQ$ is of pure weight $n$ and can be written as
	\[T=\bigoplus_{i=1}^N\left(V^{\otimes m_i}\otimes (V^\lor)^{\otimes n_i}\right),\]
	where $m_i,n_i\ge0$ are nonnegative integers. Then $W\subseteq T$ is a Hodge substructure if and only if the action of $\op{Hg}(V)$ on $T$ stabilizes $W$.
\end{proposition}
\begin{proof}
	Of course, if $W\subseteq T$ is a Hodge substructure, then $W$ is preserved by the action of $\op{MT}(V)$, so $W$ will be preserved by the action of $\op{Hg}(V)\subseteq\op{MT}(V)$.
	
	Conversely, if $\op{Hg}(V)$ stabilizes $W$, then we would like to show that $W\subseteq T$ is a Hodge substructure, which by \Cref{prop:tensors-of-mt} is the same as showing that $\op{MT}(V)$ stabilizes $W$. For this, we use \Cref{lem:mt-by-hg}, which tells us that $\op{MT}(V)\subseteq\mathbb G_{m,\QQ}\op{Hg}(V)$. Namely, because $\op{Hg}(V)$ already stabilizes $W$, it is enough to note that of course the scalars $\mathbb G_{m,\QQ}$ stabilize the subspace $W\subseteq T$.
\end{proof}
\begin{corollary} \label{cor:irrep-hs-is-irrep-hg}
	Fix an irreducible Hodge structure $V\in\op{HS}_\QQ$ of pure weight. Observe that the inclusion $\op{Hg}(V)\subseteq\op{GL}(V)$ makes $V$ into a representation of $\op{Hg}(V)$. Then $V$ is irreducible as a representation of $\op{Hg}(V)$.
\end{corollary}
\begin{proof}
	By \Cref{prop:tensors-of-hg}, a $\op{Hg}(V)$-submodule is a Hodge substructure, but there are no nonzero proper Hodge substructures because $V$ is an irreducible Hodge structure.
\end{proof}
% \begin{corollary} \label{lem:mt-hg-reductive}
% 	Fix a polarizable Hodge structure $V\in\op{HS}_\QQ$ of pure weight. Then $\op{Hg}(V)$ is reductive.
% \end{corollary}
% \begin{proof}
% 	The same proof as in \Cref{lem:mt-hg-reductive} goes through, except we now must use \Cref{prop:tensors-of-hg} instead of \Cref{prop:tensors-of-mt}.
% \end{proof}
% While we're here, we remark that we also have the bound \Cref{lem:mt-fixes-endos}.
% \begin{lemma} \label{lem:hg-fixes-endos}
% 	Fix $V\in\op{HS}_\QQ$ of pure weight, and let $D\coloneqq\op{End}_{\op{HS}}(V)$ be the endomorphism algebra of $V$. Then
% 	\[D=\op{End}_\QQ(V)^{\op{Hg}(V)}.\]
% \end{lemma}
% \begin{proof}
% 	Note that the scalar subgroup $\mathbb G_{m,\QQ}\subseteq\op{GL}(V)$ acts trivially on $V\otimes V^\lor\cong\op{End}_\QQ(V)$. Thus, we combine \Cref{lem:mt-by-hg} with \Cref{lem:mt-fixes-endos} to compute
% 	\begin{align*}
% 		\op{End}_\QQ(V)^{\op{Hg}(V)} &= \op{End}_\QQ(V)^{\mathbb G_{m,\QQ}\op{Hg}(V)} \\
% 		&= \op{End}_\QQ(V)^{\mathbb G_{m,\QQ}\op{MT}(V)} \\
% 		&= \op{End}_\QQ(V)^{\op{MT}(V)} \\
% 		&= D,
% 	\end{align*}
% 	as required.
% \end{proof}

\section{Computational Tools}
In this section, we provide some discussion which will help the computations used later in this thesis.

\subsection{Bounding with Known Classes} \label{subsec:mt-class-bounds}
Here, we use endomorphisms and the polarization to bound the size of $\op{MT}(V)$ and $\op{Hg}(V)$.
\begin{lemma} \label{lem:mt-hg-reductive}
	Fix a polarizable Hodge structure $V\in\op{HS}_\QQ$ of pure weight. Then $\op{MT}(V)$ and $\op{Hg}(V)$ are reductive.
\end{lemma}
\begin{proof}
	By \cite[Corollary~19.18]{milne-alg-groups}, it is enough to find faithful semisimple representations of $\op{MT}(V)$ and $\op{Hg}(V)$. We claim that the inclusions $\op{MT}(V)\subseteq\op{GL}(V)$ and $\op{Hg}(V)\subseteq\op{GL}(V)$ provide this representation: certainly this representation is faithful, and it is faithful because any subrepresentation is a Hodge substructure by \Cref{prop:tensors-of-mt,prop:tensors-of-hg}.
\end{proof}
\begin{lemma} \label{lem:mt-commutes-with-endo}
	Fix $V\in\op{HS}_\QQ$. Let $D\coloneqq\op{End}_{\mathrm{HS}}(V)$ be the endomorphism algebra of $V$. Then $\op{MT}(V)$ is an algebraic $\QQ$-subgroup of
	\[\op{GL}_D(V)\coloneqq\{g\in\op{GL}(V):g\circ d=d\circ g\text{ for all }d\in D\}.\]
\end{lemma}
\begin{proof}[Proof 1]
	Noting that $\op{GL}_D(V)$ is an algebraic $\QQ$-group (it is a subgroup of $\op{GL}(V)$ cut out by the equations given by commuting with a basis of $D$), it is enough to show that $\op{GL}_D(V)$ contains the image of the representation $h\colon\mathbb S\to\op{GL}(V)_\RR$. Well, by definition $D$ consists of morphisms commuting with the action of $\mathbb S$, so the image of $h$ must commute with $D$.
	% There is a canonical isomorphism $V\otimes V^\lor\to\op{End}_\QQ(V)$ of $\mathbb S$-representations, so by tracking through how representations of $\mathbb S$ correspond to Hodge structures, we see that $f\colon V\to V$ preserves the Hodge structure if and only if it is fixed by $\mathbb S$, which is equivalent to the corresponding element $f\in V\otimes V^\lor$ being fixed by $\mathbb S$, which is equivalent to $f$ being a Hodge class by \Cref{rem:hodge-class-by-s}. This completes the proof because $\op{MT}(V)$ fixes Hodge classes by \Cref{cor:hodge-classes-by-mt}. 
\end{proof}
\begin{proof}[Proof 2]
	Motivated by \Cref{cor:mt-by-classes}, one expects to find Hodge classes corresponding to the condition of commuting with $D$. Well, there is a canonical isomorphism $V\otimes V^\lor\to\op{End}_\QQ(V)$ of $\mathbb S$-representations, so by tracking through how representations of $\mathbb S$ correspond to Hodge structures, we see that $f\colon V\to V$ preserves the Hodge structure if and only if it is fixed by $\mathbb S$, which is equivalent to the corresponding element $f\in V\otimes V^\lor$ being fixed by $\mathbb S$, which is equivalent to $f$ being a Hodge class by \Cref{rem:hodge-class-by-s}. This completes the proof of the lemma upon comparing with \Cref{cor:hodge-classes-by-mt}.
\end{proof}
\begin{remark}
	Of course, we also have $\op{Hg}(V)\subseteq\op{GL}_D(V)$ because $\op{Hg}(V)\subseteq\op{MT}(V)$.
\end{remark}
% \begin{remark}
% 	Motivated by \Cref{cor:mt-by-classes}, one expects to find Hodge classes corresponding to the condition of commuting with $D$. Well, there is a canonical isomorphism $V\otimes V^\lor\to\op{End}_\QQ(V)$ of $\mathbb S$-representations, so by tracking through how representations of $\mathbb S$ correspond to Hodge structures, we see that $f\colon V\to V$ preserves the Hodge structure if and only if it is fixed by $\mathbb S$, which is equivalent to the corresponding element $f\in V\otimes V^\lor$ being fixed by $\mathbb S$, which is equivalent to $f$ being a Hodge class by \Cref{rem:hodge-class-by-s}. This gives another proof of the lemma upon comparing with \Cref{cor:hodge-classes-by-mt}.
% \end{remark}
\begin{lemma} \label{lem:mt-commutes-polarization}
	Fix $V\in\op{HS}_\QQ$ pure of weight $m$ with polarization $\varphi$. Then $\op{MT}(V)$ is an algebraic $\QQ$-subgroup of
	\[\op{GSp}(\varphi)\coloneqq\{g\in\op{GL}(V):\varphi(gv\otimes gw)=\lambda(g)\varphi(v\otimes w)\text{ for fixed }\lambda(g)\in\QQ\}.\]
\end{lemma}
\begin{proof}[Proof 1]
	Once again, we note that $\op{GSp}(\varphi)$ is an algebraic $\QQ$-group cut out by equations of the form
	\[\varphi(gv\otimes gw)\varphi(v'\otimes w')=\varphi(v\otimes w)\varphi(gv'\otimes gw')\]
	as $v,w,v',w'\in V$ varies over a basis. Thus, it is enough to check that $\op{GSp}(\varphi)$ contains the image of $h\colon\mathbb S\to\op{GL}(V)_\RR$. Well, for any $z\in\mathbb S(\RR)$, we note that
	\[\varphi(h(z)\otimes h(z)w)=h_{\QQ(-m)}(z)\varphi(v\otimes w)\]
	for any $v,w\in V_\RR$ because $\varphi$ is a morphism of Hodge structures.
	% As in \Cref{lem:mt-commutes-with-endo}, we will show this by constructing a Hodge cycle and using \Cref{cor:hodge-classes-by-mt}. We remark that one can also show this more directly by showing that the image of $h$ lives in the algebraic $\QQ$-group $\op{GSp}(\varphi)$.
\end{proof}
\begin{proof}[Proof 2]
	Once again, \Cref{cor:mt-by-classes} tells us to expect the polarization to produce a Hodge class corresponding to the above equations cutting out $\op{MT}(V)$.
	
	This construction is slightly more involved. We begin by constructing two Hodge classes.
	\begin{itemize}
		\item Note $\varphi\colon V\otimes V\to\QQ(-m)$ is a morphism of Hodge structrures, so it is an $\mathbb S$-invariant map and hence given by an $\mathbb S$-invariant element of $V^\lor\otimes V^\lor(-m)$. Thus, $\varphi\in V^\lor\otimes V^\lor(-m)$ is a Hodge class by \Cref{rem:hodge-class-by-s}.
		\item Because $\varphi$ is non-degenerate, it induces an isomorphism $V(m)\to V^\lor$. Now, $\op{End}_\QQ(V)$ is canonically isomorphic to $V\otimes V^\lor$, which we now see is isomorphic (via $\varphi$) to $V\otimes V(m)$. We let $C\in V\otimes V(m)$ be the image of ${\id_V}\in\op{End}_\QQ(V)^{\mathbb S}$ in $V\otimes V(m)$, which we note is a Hodge class again by \Cref{rem:hodge-class-by-s}. (Here, $C$ stands for ``Casimir.'')
	\end{itemize}
	In total, we see that we have produced a Hodge class $C\otimes\varphi$. It remains to show that $g\in\op{GL}(V)$ fixing $C\otimes\varphi$ implies that $g\in\op{GSp}(\varphi)$, which will complete the proof by \Cref{cor:hodge-classes-by-mt}.

	Well, suppose $g(C\otimes\varphi)=C\otimes\varphi$. Note $g(C\otimes\varphi)=gC\otimes g\varphi$, which can only equal $C\otimes\varphi\in(V\otimes V)\otimes_\QQ(V^\lor\otimes V^\lor)$ if there is a scalar $\lambda\in\QQ^\times$ such that $gC=\lambda C$ and $g\varphi=\lambda^{-1}\varphi$. This second condition amounts to requiring
	\[\varphi\left(g^{-1}v\otimes g^{-1}w\right)=\lambda^{-1}\varphi(v\otimes w)\]
	for any $v,w\in V$, which rearranges into $g\in\op{GSp}(\varphi)$.
	% For this, we want a more explicit description of $C$. Let $\{v_1,\ldots,v_n\}$ be a basis of $V$, and $\{v_1^*,\ldots,v_n^*\}$ be the dual basis of $V(m)$ taken with respect to $\varphi$. Then ${\id_V}\in\op{End}_\QQ(V)$ corresponds to the element
	% \[C=\sum_{i=1}^nv_i\otimes v_i^*\in V\otimes V(m).\]
	% We now begin our compuation. Suppose $g\in\op{GL}(V)$ fixes $C\otimes\varphi$. 
\end{proof}
\begin{remark}
	The construction given in the above proof is described in \cite[Remark~8.3.4]{ggl-fermat}. They also show the converse claim that any $g\in\op{GSp}(\varphi)$ fixes $C\otimes\varphi$.
	
	To see this, one has to do an explicit computation with $C$. For this, let $\{v_1,\ldots,v_n\}$ be a basis of $V$, and $\{v_1^*,\ldots,v_n^*\}$ be the dual basis of $V(m)$ taken with respect to $\varphi$. Then $C=\sum_{i=1}^nv_i\otimes v_i^*$. Similarly, we see that $\{gv_1,\ldots,gv_n\}$ is a basis of $V$ with a dual basis $\{(gv_1)^*,\ldots,(gv_n)^*\}$ so that $C=\sum_{i=1}^n(gv_i)\otimes(gv_i)^*$. Now, on one hand, if $g$ has multiplier $\lambda$, then $g\varphi=\lambda^{-1}\varphi$. On the other hand, $\varphi(gv_i,gv_j^*)=\lambda1_{i=j}$, so $(gv_i)^*=\lambda^{-1}gv_i^*$, which allows us to compute $gC=\lambda C$. In total, $g(C\otimes\varphi)=C\otimes\varphi$.
\end{remark}
\begin{remark}
	One can check that $\op{GSp}(\varphi)$ does not depend on the choice of polarization. Roughly speaking, the point is that the choice of a different polarization amounts to some choice of an element in $D^\times$ which we can track through.%\todo{}
\end{remark}
In light of the above two lemmas, we pick up the following notation.
\begin{notation}
	Fix $V\in\op{HS}_\QQ$ pure of weight $m$ with $D\coloneqq\op{End}_{\op{HS}}(V)$ and polarization $\varphi$. Then we define
	\[\op{GSp}_D(\varphi)\coloneqq\op{GL}_D(V)\cap\op{GSp}(\varphi).\]
	By \Cref{lem:mt-commutes-with-endo,lem:mt-commutes-polarization}, we see that $\op{MT}(V)\subseteq\op{GSp}_D(\varphi)$.
\end{notation}
\begin{remark} \label{rem:generic-mt}
	In ``most cases,'' we expect that generic Hodge structures $V$ should have the equality $\op{MT}(V)=\op{GL}_D(V)$, and if $V$ admits a polarization $\varphi$, then we expect the equality $\op{MT}(V)=\op{GSp}_D(\varphi)$. To rigorize this intuition, one must discuss Shimura varieties, which we will avoid doing for now.
\end{remark}
We can also apply \Cref{lem:mt-commutes-with-endo,lem:mt-commutes-polarization} to bound $\op{Hg}(V)$.
\begin{notation}
	Fix $V\in\op{HS}_\QQ$ pure of weight $m$ with $D\coloneqq\op{End}_{\op{HS}}(V)$ and polarization $\varphi$. Then we define
	\[\op{Sp}(\varphi)\coloneqq\{g\in\op{GL}(V):\varphi(gv\otimes gw)=\varphi(v\otimes w)\},\]
	and
	\[\op{Sp}_D(\varphi)\coloneqq\op{GL}_D(V)\cap\op{Sp}(\varphi).\]
\end{notation}
\begin{remark} \label{rem:hg-commutes-polarization}
	Let's explain why $\op{Hg}(V)\subseteq\op{Sp}_D(\varphi)$. By \Cref{lem:mt-commutes-with-endo}, we see that $\op{Hg}(V)\subseteq\op{MT}(V)\subseteq\op{GL}_D(V)$, so it remains to check that $\op{Hg}(V)\subseteq\op{Sp}(\varphi)$. Proceeding as in \Cref{lem:mt-commutes-polarization}, it is enough to check that the image of $h|_{\mathbb U}$ lives in $\op{Sp}(\varphi)_\RR$, for which we note that any $z\in\mathbb U(\RR)$ has
	\[\varphi(h(z)v\otimes h(z)w)=h_{\QQ(-m)}(z)\varphi(v\otimes w),\]
	but $h_{\QQ(-m)}(z)=\left|z\right|^{-2m}{\id_{\QQ(-m)}}$ is the identity because $z\in\mathbb U(\RR)$.
\end{remark}
Thus far, our tools have been upper-bounding $\op{MT}(V)$ and $\op{Hg}(V)$. Here is a tool which sometimes provides a lower bound.
\begin{lemma} \label{lem:mt-hg-fixes-endos}
	Fix $V\in\op{HS}_\QQ$ of pure weight, and let $D\coloneqq\op{End}_{\op{HS}}(V)$ be the endomorphism algebra of $V$. Then
	\[D=\op{End}_\QQ(V)^{\op{MT}(V)}=\op{End}_\QQ(V)^{\op{Hg}(V)}.\]
\end{lemma}
\begin{proof}
	As discussed in the second proof of \Cref{lem:mt-commutes-with-endo}, the Hodge calsses of $\op{End}_\QQ(V)\cong V\otimes V^\lor$ are exactly the endomorphisms of the Hodge structure, so the first equality follows from \Cref{cor:hodge-classes-by-mt}.

	The second equality is purely formal: note that the scalar subgroup $\mathbb G_{m,\QQ}\subseteq\op{GL}(V)$ acts trivially on $V\otimes V^\lor\cong\op{End}_\QQ(V)$. Thus, we use \Cref{lem:mt-by-hg} to compute
	\begin{align*}
		\op{End}_\QQ(V)^{\op{Hg}(V)} &= \op{End}_\QQ(V)^{\mathbb G_{m,\QQ}\op{Hg}(V)} \\
		&= \op{End}_\QQ(V)^{\mathbb G_{m,\QQ}\op{MT}(V)} \\
		&= \op{End}_\QQ(V)^{\op{MT}(V)},
	\end{align*}
	as required.
\end{proof}
\begin{remark}
	To understand \Cref{lem:mt-hg-fixes-endos} as providing a lower bound, note that if $\op{MT}(V)$ is ``too small,'' then there will be many invariant elements in $\op{End}_\QQ(V)^{\op{MT}(V)}$, perhaps exceeding $D$. On the other hand, the upper bound $\op{MT}(V)\subseteq\op{GL}_D(V)$ corresponds to the inequality $D\subseteq\op{End}_\QQ(V)^{\op{MT}(V)}$.
\end{remark}

\subsection{Sums}
For later use in computations, it will be helpful to have a few remarks on computing the Mumford--Tate and Hodge groups of a sum. Here the Hodge group really shines: given two Hodge structures $V_1,V_2\in\op{MT}(V)$ pure of nonzero weight, \Cref{lem:mt-by-hg} tells us that $\op{MT}(V_1)$ and $\op{MT}(V_2)$ and $\op{MT}(V_1\oplus V_2)$ are all equal to some smaller group times scalars. It will turn out to be reasonable to hope that
\[\op{Hg}(V_1\oplus V_2)\stackrel?=\op{Hg}(V_1)\times\op{Hg}(V_2),\]
but then the introduction of scalars makes the hope $\op{MT}(V_1\oplus V_2)\stackrel?=\op{MT}(V_1)\times\op{MT}(V_2)$ unreasonable!

With this in mind, let's begin to study Hodge groups of sums of Hodge structures.
\begin{lemma} \label{lem:product-of-hg}
	Fix Hodge structures $V_1,\ldots,V_k\in\op{Hg}_\QQ$ pure of the same weight.
	\begin{listalph}
		\item The subgroup $\op{Hg}(V_1\oplus\cdots\oplus V_k)\subseteq\op{GL}(V_1\oplus\cdots\oplus V_k)$ is contained in $\op{Hg}(V_1)\times\cdots\times\op{Hg}(V_k)\subseteq\op{GL}(V_1\oplus\cdots\oplus V_k)$.
		\item For each $i$, the projection map $\op{pr}_i\colon\op{Hg}(V_1\oplus\cdots\oplus V_k)\to\op{Hg}(V_i)$ is surjective.
	\end{listalph}
\end{lemma}
\begin{proof}
	For each $i$, let $h_i$ denote the representations of $\mathbb S$ corresponding to the Hodge structures $V_i$, and let $h\coloneqq (h_1,\ldots,h_k)$ be the representation $\mathbb S\to\op{GL}(V)$ where $V\coloneqq V_1\oplus\cdots\oplus V_k$. We show the claims in sequence.
	\begin{listalph}
		\item We must show that $\op{Hg}(V_1)\times\cdots\times\op{Hg}(V_k)$ contains the image of $h|_{\mathbb U}$. Well, for any $z\in\mathbb U(\RR)$ and index $i$, we see that $h_i(z)\in\op{Hg}(V_i)$, so
		\[h(z)=\op{diag}(h_1(z),\ldots,h_k(z))\]
		lives in $\op{Hg}(V_1)\times\cdots\times\op{Hg}(V_k)$, as required.
		\item Fix an index $i$. It is enough to show that smallest algebraic $\QQ$-group containing the image of $\op{pr}_i$ also contains the image of $h_i|_{\mathbb U}$. Well, by definition of $h$, we see that $h_i$ is equal to the composite
		\[\mathbb S\stackrel{h}\to\op{GL}(V_1)\times\cdots\times\op{GL}(V_k)\stackrel{\op{pr}_i}\to\op{GL}(V_i),\]
		from which the claim follows.
		\qedhere
	\end{listalph}
\end{proof}
\begin{remark}
	All the claims in \Cref{lem:product-of-hg} are true if $\op{Hg}$ is replaced by $\op{MT}$ everywhere. One simply has to replace $\mathbb U$ with $\mathbb S$ in the proof.
\end{remark}
\Cref{lem:product-of-hg} makes $\op{Hg}(V_1\oplus V_2)\stackrel?=\op{Hg}(V_1)\times\op{Hg}(V_2)$ appear to be a reasonable expectation. However, we note that we cannot in general expect this to be true: roughly speaking, there may be Hodge cycles on $V_1\oplus V_2$ which are not seen on just $V_1$ or $V_2$. Here is a degenerate example.
\begin{example} \label{ex:diagonal-hodge-group}
	Fix a Hodge structure $V\in\op{HS}_\QQ$ of pure weight, and let $n\ge1$ be a positive integer. Letting $h\colon\mathbb S\to\op{GL}(V)_\RR$ be the corresponding representation, we get another Hodge structure $h^{n}\colon\mathbb S\to\op{GL}\left(V^{\oplus n}\right)$. We claim that the diagonal embedding of $\op{Hg}(V)$ into $\op{GL}(V)^n\subseteq\op{GL}\left(V^{\oplus n}\right)$ induces an isomorphism
	\[\op{Hg}(V)\to\op{Hg}\left(V^{\oplus n}\right).\]
	On one hand, we note that $\op{Hg}\left(V^{\oplus n}\right)$ lives inside the diagonal embedding of $\op{Hg}(V)$: note $\op{Hg}\left(V^{\oplus n}\right)\subseteq\op{Hg}(V)^n$ by \Cref{lem:product-of-hg}, and $\op{Hg}\left(V^{\oplus n}\right)$ must live inside the diagonal embedding of $\op{GL}(V)\subseteq\op{GL}\left(V^{\oplus n}\right)$ becuase all components of $h^n\colon\mathbb S\to\op{GL}\left(V^{\oplus n}\right)_\RR$ are equal. On the other hand, the surjectivity of the projections $\op{Hg}\left(V^{\oplus n}\right)\to\op{Hg}(V)$ from \Cref{lem:product-of-hg} implies that $\op{Hg}\left(V^{\oplus n}\right)$ must equal the diagonal embedding of $\op{Hg}(V)$ (instead of merely being contained in it).
\end{example}
One can upgrade this example as follows.
\begin{lemma} \label{lem:hg-isotypic}
	Fix Hodge structures $V_1,\ldots,V_k\in\op{Hg}_\QQ$ pure of the same weight, and let $m_1,\ldots,m_k\ge1$ be positive integers. Then the diagonal embeddings $\Delta_i\colon\op{GL}(V_i)\to\op{GL}\left(V_i^{\oplus m_i}\right)$ induce an isomorphism
	\[\op{Hg}(V_1\oplus\cdots\oplus V_k)\to\op{Hg}\left(V_1^{\oplus m_1}\oplus\cdots\oplus V_k^{\oplus m_k}\right).\]
\end{lemma}
\begin{proof}
	We proceed in steps. The proof is a direct generalization of the one given in \Cref{ex:diagonal-hodge-group}. For each $i$, let $h_i\colon\mathbb S\to\op{GL}(V_i)_\RR$ be the representation corresponding to the Hodge structure, and set $h\coloneqq\left(h_1^{m_1},\ldots,h_k^{m_k}\right)$.
	\begin{enumerate}
		\item We claim that $\op{Hg}\left(V_1^{\oplus m_1}\oplus\cdots\oplus V_k^{\oplus m_k}\right)$ lives in the image of $(\Delta_1,\ldots,\Delta_k)$. Indeed, the image is some algebraic $\QQ$-subgroup of $\op{GL}\left(V_1^{\oplus m_1}\oplus\cdots\oplus V_k^{\oplus m_k}\right)$, so we would like to check that this algebraic $\QQ$-subgroup contains the image of $h|_{\mathbb U}$. Well, for any $z\in\mathbb U(\RR)$, we see that
		\[h(z)=(\Delta_1(h_1(z)),\ldots,\Delta_k(h_k(z)))\]
		lives in the image of $(\Delta_1,\ldots,\Delta_k)$.
		\item For each $i$, let $H_i$ be the projection of $\op{Hg}\left(V_1^{\oplus m_1}\oplus\cdots\oplus V_k^{\oplus m_k}\right)$ onto one of the $V_i$ components as in \Cref{lem:product-of-hg}; the choice of $V_i$ component does not matter by the previous step. By \Cref{lem:product-of-hg}, we see that $H_i=\op{Hg}(V_i)$. However, the previous step now requires
		\[\op{Hg}\left(V_1^{\oplus m_1}\oplus\cdots\oplus V_k^{\oplus m_k}\right)=\Delta_1(H_1)\times\cdots\times \Delta_k(H_k),\]
		so we are done.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{remark}
	As usual, this statement continues to be true for $\op{MT}$ replacing $\op{Hg}$. One can either see this by applying \Cref{lem:mt-by-hg} or by redoing the proof with $\mathbb S$ replacing $\mathbb U$.
\end{remark}
The point of the lemma is that we can reduce our computation of Hodge groups to Hodge structures which are the sum of pairwise non-isomoprhic irreducible Hodge strucutures. Let's make a few remarks about this situation for completeness. Let $V_1,\ldots,V_k$ be pairwise non-isomorphic irreducuble Hodge structures which are pure of the same weight, and set $V\coloneqq V_1\oplus\cdots\oplus V_k$. Here are some remarks on $\op{Hg}(V_1\times\cdots\times V_k)$, summarizing everything we have done so far.
\begin{itemize}
	\item We know that $\op{Hg}(V)\subseteq\op{Hg}(V_1)\times\cdots\times\op{Hg}(V_k)$.
	\item We know that the projections of $\op{Hg}(V)$ onto each factor $\op{Hg}(V_i)$ are surjective.
	\item For each $i$, we may view $V_i$ as a representation of $\op{Hg}(V_i)$ via the inclusion $\op{Hg}(V_i)\subseteq\op{GL}(V_i)$. Then \Cref{cor:irrep-hs-is-irrep-hg} tells us that $V_i$ is an irreducible representation of $\op{Hg}(V_i)$.
	\item One can also apply \Cref{lem:mt-hg-fixes-endos} to the full space $V$ to see that
	\begin{align*}
		\op{End}_{\op{Hg}(V)}(V) &= \op{End}_{\op{HS}}(V) \\
		&= \prod_{i=1}^k\op{End}_{\op{HS}}(V_i) \\
		&= \prod_{i=1}^k\op{End}_{\op{Hg}(V_i)}(V_i).
	\end{align*}
\end{itemize}
The following results take the above situation and provides some criteria to have
\[\op{Hg}(V)\stackrel?=\op{Hg}(V_1)\times\cdots\times\op{Hg}(V_k).\]
Before stating the lemma, we remark that all groups in sight are connected by \Cref{rem:hg-connected}, and we already have one inclusion by \Cref{lem:product-of-hg}, so it suffices to pass to an algebraic closure and work with Lie algebras instead of the Lie groups. The following lemma is essentially due to Ribet \cite[pp.~790--791]{ribet-galois-action-rm}.
\begin{lemma}[Ribet] \label{lem:ribet-product}
	Work over an algebraically closed field of characteristic $0$. Let $V_1,\ldots,V_k$ be finite-dimensional vector spaces, and let $\mf g$ be a Lie subalgebra of $\mf{gl}(V_1)\times\cdots\times\mf{gl}(V_k)$. For each index $i$, let $\op{pr}_i\colon(\mf{gl}(V_1)\times\cdots\times\mf{gl}(V_k))\to\mf{gl}(V_i)$ be the $i$th projection, and set $\mf g_i\coloneqq\op{pr}_i(\mf g)$. Suppose the following.
	\begin{listroman}
		\item Each $\mf g_i$ is nonzero and simple.
		\item For each pair $(i,j)$ of distinct indices, the projection map $({\op{pr}_i},{\op{pr}_j})\colon\mf g\to\mf g_i\times\mf g_j$ is surjective.
	\end{listroman}
	Then $\mf g=\mf g_1\times\cdots\times\mf g_k$.
\end{lemma}
\begin{proof}
	We proceed by induction on $k$. If $k\in\{0,1\}$, then there is nothing to say. For the induction, we now assume that $k\ge2$ and proceed in steps.
	\begin{enumerate}
		\item For our set-up, we let $J$ be the kernel of $\op{pr}_k\colon\mf g\to\mf g_n$. By definition, $J\subseteq\mf g_1\times\cdots\times\mf g_k$ takes the form $I\oplus0$ for some subspace $I\subseteq\mf g_1\times\cdots\times\mf g_{k-1}$. Formally, one may let $I$ be the set of vectors $v$ such that $(v,0)\in J$ and argue for the equality $J=I\oplus0$ because all vectors in $J$ take the form $(v,0)$.

		The main content of the proof goes into showing that $I$ is actually an ideal. To set ourselves up to prove this claim, let $\mf n\subseteq\mf g_1\times\cdots\times\mf g_{k-1}$ denote its normalizer. We would like to show that $\mf n=\mf g_1\times\cdots\times\mf g_{k-1}$, for which we use the inductive hypothesis.

		% \item For each index $i<k$, we claim that the projections $\op{pr}_i\colon\mf n\to\mf g_i$ are surjective. In fact, we will show that the projections $\op{pr}_i\colon I\to\mf g_i$, which is sufficient because $I\subseteq\mf n$. For this, we use the hypothesis (ii): for any $X_i\in\mf g_i$, note that the projection map $({\op{pr}_i},{\op{pr}_n})\colon\mf g\to\mf g_i\times\mf g_n$ is surjective, so one may find $(X_1,\ldots,X_k)\in\mf g$ with the correct $X_i\in\mf g_i$ coordinate and $X_k=0$. We now note that $(X_1,\ldots,X_k)\in J$ and so $(X_1,\ldots,X_{k-1})\in I$ provides the needed element.
		
		\item For each pair of distinct indices $i,j<k$, we claim that the projection $({\op{pr}_i},{\op{pr}_j})\colon\mf n\to\mf g_i\times\mf g_j$ is surjective. Well, choose $X_i\in\mf g_i$ and $X_j\in\mf g_j$, and we need to find an element in $\mf n$ with $X_i$ and $X_j$ at the correct coordinates.

		To begin, we note that (ii) yields some $(X_1,\ldots,X_k)\in\mf g$ such that with the correct $X_i\in\mf g_i$ and $X_j\in\mf g_j$ coordinates. We would like to show that $X\coloneqq(X_1,\ldots,X_{k-1})$ lives in $\mf n$, which will complete this step. Well, select any $Y\coloneqq(Y_1,\ldots,Y_{k-1})$ in $I$, and we see $(Y,0)\in J$, so
		\[[(X,X_k),(Y,0)]=([X,Y],0)\]
		lives in $J$ too (recall $J$ is an ideal), so we conclude $[X,Y]\in I$. We conclude that $X$ normalizes $I$, so $X\in\mf n$.

		\item We take a moment to complete the proof that $I\subseteq\mf g_1\times\cdots\times\mf g_{k-1}$ is an ideal. It is enough to check that the normalizer $\mf n$ of $I$ in $\mf g_1\times\cdots\times\mf g_{k-1}$ equals all of $\mf g_1\times\cdots\times\mf g_{k-1}$. For this, we use the inductive hypothesis. The previous step shows that $\mf g_i=\op{pr}_i(\mf n)$ for each $i$, and we know by (i) that each $\mf g_i$ is already nonzero and simple. Lastly, the previous step actually checks condition (ii) for the inductive hypothesis, completing the proof that $\mf n=\mf g_1\times\cdots\times\mf g_{k-1}$.

		\item We claim $I=\mf g_1\times\cdots\times\mf g_{k-1}$. Because $I\subseteq\mf g_1\times\cdots\times\mf g_{k-1}$ is an ideal of a sum of simple algebras, we know that
		\[I=\bigoplus_{i\in S}\mf g_i\]
		for some subset $S\subseteq\{1,\ldots,k-1\}$ of indices. Thus, to achieve the equality $I\stackrel?=\mf g_1\times\cdots\times\mf g_{k-1}$, it is enough to check that each projection $\op{pr}_i\colon I\to\mf g_{k-1}$ is surjective. Unravelling the definition of $I$, it is enough to check that each $X_i\in\mf g_i$ has some $(X_1,\ldots,X_k)\in\mf g$ with the correct $X_i$ coordinate and $X_k=0$. This last claim follows from hypothesis (ii) of $\mf g$!

		\item We now finish the proof of the lemma. Certainly $\mf g\subseteq\mf g_1\times\cdots\times\mf g_k$, so it is enough to compute dimensions to prove the equality. By the short exact sequence
		\[0\to J\to\mf g\to\mf g_n\to0,\]
		it is enough to show that $\dim J=\dim\mf g_1+\cdots+\dim\mf g_{k-1}$. However, this follows from the previous step because $\dim J=\dim I$.
		\qedhere
	\end{enumerate}
\end{proof}
In practice, it is somewhat difficult to check (ii) of \Cref{lem:ribet-product}. Here is an automation.
\begin{lemma}[Moonen--Zarhin] \label{lem:mz-product}
	Work over an algebraically closed field of characteristic $0$. Let $V_1,\ldots,V_k$ be finite-dimensional vector spaces, and let $\mf g$ be a Lie subalgebra of $\mf{gl}(V_1)\times\cdots\times\mf{gl}(V_k)$. For each index $i$, let $\op{pr}_i\colon(\mf{gl}(V_1)\times\cdots\times\mf{gl}(V_k))\to\mf{gl}(V_i)$ be the $i$th projection, and set $\mf g_i\coloneqq\op{pr}_i(\mf g)$. Suppose the following.
	\begin{listroman}
		\item Each $\mf g_i$ is nonzero and simple.
		\item Fix a simple Lie algebra $\mf l$, and define $I(\mf l)\coloneqq\{i:\mf g_i\cong\mf l\}$. If $\#I(\mf l)>1$, we require the following to hold.
		\begin{itemize}
			\item All automorphisms of $\mf l$ are inner.
			\item One can choose isomorphisms $\mf l\to\mf g_i$ for each $i\in I(\mf l)$ such that the representations $\mf l\to\mf g_i\to\mf{gl}(V_i)$ are all isomorphic.
			\item The diagonal inclusion
			\[\prod_{i\in I(\mf l)}\op{End}_{\mf g_i}(V_i)\to\op{End}_{\mf g}\Bigg(\bigoplus_{i\in I(\mf l)}V_i\Bigg)\]
			is surjective.
		\end{itemize}
	\end{listroman}
	Then $\mf g=\mf g_1\times\cdots\times\mf g_k$.
\end{lemma}
\begin{proof}
	We will show that (ii) in the above lemma implies (ii) of \Cref{lem:ribet-product}, which will complete the proof. We will proceed by contraposition in the following way. Fix a pair $(i,j)$ of distinct indices, and we are interested in the map $({\op{pr}_i},{\op{pr}_j})\colon\mf g\to\mf g_i\times\mf g_j$. Supposing that $({\op{pr}_i},{\op{pr}_j})$ fails to be surjective (which is a violation of (ii) of \Cref{lem:ribet-product}), we will show that (ii) cannot be true. In particular, we will assume the first two points of (ii) and show then that the third point of (ii) is false.
	
	Roughly speaking, we are going to use the first two points of (ii) to find an $\mathfrak h$ and then produce an endomorphism of $\bigoplus_{i\in I(\mf h)}V_i$ which does not come from gluing together endomorphisms of the $V_i$s. Having stated the outline, we proceed with the proof in steps.
	\begin{enumerate}
		\item We claim that the image $\mf h$ of the map $({\op{pr}_i},{\op{pr}_j})\colon\mf g\to\mf g_i\times\mf g_j$ is the graph of an isomorphism $\mf g_i\to\mf g_j$. For this, we use the hypothesis that $({\op{pr}_i},{\op{pr}_j})$ fails to be surjective. Well, we claim that the projections $\mf h\to\mf g_i$ and $\mf h\to\mf g_j$ are isomorphisms, which implies that $\mf h$ is the graph of the composite isomorphism
		\[\mf g_i\from\mf h\to\mf g_j.\]
		By symmetry, it is enough to merely check that $\mf h\to\mf g_i$ is an isomorphism. On one hand, $\mf h\to\mf g_i$ is surjective because $\op{pr}_i\colon\mf g\to\mf g_i$ is surjective by construction of $\mf g_i$. On the other hand, the kernel of the projection $\mf h\to\mf g_i$ will be an ideal of $\mf h$ of the form $0\oplus I$ where $I\subseteq\mf g_j$ is some subspace. In fact, becasue the projection $\mf h\to\mf g_j$ is also surjective, we see that $I\subseteq\mf g_j$ must be an ideal, so the simplicity of $\mf g_j$ grants two cases.
		\begin{itemize}
			\item If $I=0$, then $\op{pr}_i\colon\mf h\to\mf g_i$ becomes injective and is thus an isomorphism, completing this step.
			\item If $I=\mf g_j$, then $\mf h$ fits into a short exact sequence
			\[0\to(0\oplus\mf g_j)\to\mf h\to\mf g_i\to0,\]
			so $\dim\mf h=\dim(\mf g_i\oplus\mf g_j)$, implying the inclusion $\mf h\subseteq\mf g_i\oplus\mf g_j$ is an equality. However, this cannot be the case because we assumed that $({\op{pr}_i},{\op{pr}_j})\colon\mf g\to\mf g_i\to\mf g_j$ fails to be surjective!
		\end{itemize}

		\item We construct an isomorphism of $\mf g$-representations $V_i\to V_j$. For this, we use the first two points of (ii). Let's begin by collecting some data.
		\begin{itemize}
			\item The previous step informs us that $\mf g_i\cong\mf g_j$. In fact, because this isomorphism is witnessed by the projections $\op{pr}_i\colon\mf g\to\mf g_i$ and $\op{pr}_j\colon\mf g\to\mf g_j$, we see that we are granted an isomorphism $f\colon\mf g_i\to\mf g_j$ such that ${\op{pr}_j}=f\circ\op{pr}_i$.
			\item We now let $\mf l$ be a simple Lie algebra isomorphic to both(!) $\mf g_i$ and $\mf g_j$. The second point of (ii) grants isomorphisms $f_i\colon\mf l\to\mf g_i$ and $f_j\colon\mf l\to\mf g_j$ of Lie algebras and an isomorphism $d\colon V_i\to V_j$ of $\mf l$-representations.
		\end{itemize}
		We now construct our isomorphism from $d$. Because $d$ is only an isomorphism of $\mf l$-representations, we are only granted that $(X_1,\ldots,X_k)\in\mf g$ satisfies $f(X_i)=X_j$ and hence
		\begin{align*}
			d\left((f_if_j^{-1}f)(X_i) v_i\right) &= d\left(f_i\left(f_j^{-1}f(X_i)\right)v_i\right) \\
			&= f_j\left(f_j^{-1}f(X_i)\right)d(v_i) \\
			&= X_jd(v_i)
		\end{align*}
		for all $v_i\in V_i$. We would be done if we could remove the pesky automorphism $f_if_j^{-1}f\colon\mf g_i\to\mf g_i$. This is possible because all automorphisms of $\mf g_i\cong\mf l$ are inner (!), so one may simply ``change bases'' to remove the inner automorphism. Explicitly, find $a\in\op{GL}(V_i)$ such that $f_if_j^{-1}f(X)=aXa^{-1}$ for all $X\in\mf g_i$, and then we define $e\coloneqq d\circ a$. Then we find that any $v_i\in V_i$ has
		\begin{align*}
			e(X_iv_i) &= d\left(aX_ia^{-1}\cdot av\right) \\
			&= d\left((f_if_j^{-1}f)(X_i)\cdot av\right) \\
			&= X_jd(av) \\
			&= X_je(v).
		\end{align*}

		\item We complete the proof. The previous step provides a morphism $e\colon V_i\to V_j$ of $\mf g$-representations. We thus note that the composite
		\[\bigoplus_{i'\in I(\mf l)}V_{i'}\onto V_i\stackrel e\to V_j\into\bigoplus_{i'\in I(\mf l)}V_{i'}\]
		is an endomorphism which does not come from the diagonal inclusion of $\prod_{i\in I(\mf l)}\op{End}_{\mf g_i}(V_i)$. This completes the proof by showing that the third point of (ii) fails to hold.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{remark}
	We should remark on some history. \Cref{lem:ribet-product} is due to Ribet \cite[pp.~790--791]{ribet-galois-action-rm}, but the given formulation is due to Moonen and Zarhin \cite[Lemma~2.14]{moonen-zarhin-fourfold}. In the same lemma, Moonen and Zarhin prove \Cref{lem:mz-product}, and they seem to be the first to recognize the utility of this lemma for computing Hodge groups. For example, Lombardo includes this result in his master's thesis \cite[Lemma~3.3.1]{lombardo-mumford-tate} and includes a generalized version in another paper as \cite[Lemma~3.7]{lombardo-ell-adic-product}, where it is used to compute Hodge groups of certain products of abelian varieties.
\end{remark}
\begin{remark}
	Let's explain how \Cref{lem:mz-product} is typically applied, which is admittedly somewhat different from the application used in this thesis. In the generic case, one expects (i), for example if $\op{Hg}(V)=\op{Sp}_D(\varphi)^\circ$ for $D$ of Types I--III as in \Cref{rem:generic-mt}. In this case, one can also check the first condition of (ii) by a direct computation, the second condition of (ii) has no content, and the third condition of (ii) comes from \Cref{lem:mt-hg-fixes-endos}. For more details, we refer to (for example) the applications given in \cite{lombardo-mumford-tate,lombardo-ell-adic-product}.
\end{remark}

\subsection{The Lefschetz Group}
For motivational reasons, we mention the Lefschetz group $\op L(V)$, which contains $\op{Hg}(V)$ but is more controlled. Here is our definition.
\begin{definition}[Lefschetz group]
	Fix a polarizable Hodge structure $V\in\op{HS}_\QQ$ of pure weight. Then we define
	\[\op L(V)\coloneqq\op{Sp}_D(\varphi),\]
	where $D\coloneqq\op{End}_{\op{HS}}(V)$, and $\varphi$ is a polarization.
\end{definition}
Thus, \Cref{rem:hg-commutes-polarization} that $\op{Hg}(V)\subseteq\op L(V)$.
\begin{remark}
	Let's interpret $\op L(V)$ geometrically. Roughly speaking, $\op L(V)$ is a form of $\op{Hg}(V)$ which only keeps track of endomorphisms and the polarization instead of keeping track of all Hodge classes. As such, we generically expect $\op{Hg}(V)=\op L(V)$ to hold, but we do not expect it to hold always. (Technically, there are generic cases when we do not expect this equality; for example, if $V$ is irreducible of Type III in ths sense of the Albert classificaiotn \Cref{thm:albert-classification}, then $\op L(V)$ is not connected, so we cannot have equality.) Furthermore, when $\op{Hg}(V)=\op L(V)$, we expect to have strong control on the Hodge classes of $V$; for example, the Hodge conjecture is known in many such cases \cite[Theorem~3.1]{murty-exceptional}.
\end{remark}
Computationally, one reason why $\op L(V)$ is more controlled is that it is much easier to compute. For example, $\op L$ behaves well in sums.
\begin{lemma} \label{lem:lefschetz-sums}
	Fix pairwise non-isomorphic irreducible polarizable Hodge structures $V_1,\ldots,V_k$ of the same pure weight, and let $m_1,\ldots,m_k\ge1$ be integers. Then the diagonal embeddings $\Delta_i\colon\op{GL}(V_i)\to\op{GL}\left(V_i^{\oplus m_i}\right)$ induce an isomorphism
	\[\op L(V_1)\times\cdots\times\op L(V_k)\to\op L\left(V_1^{\oplus m_1}\oplus\cdots\oplus V_k^{\oplus m_k}\right).\]
\end{lemma}
\begin{proof}
	The main idea is to compute some endomorphism algebras and polarizations. We proceed in steps. Set $V\coloneqq V_1^{\oplus m_1}\oplus\cdots\oplus V_k^{\oplus m_k}$ for brevity.
	\begin{enumerate}
		\item We work with endomorphisms. We may view Hodge structures as $\mathbb S$-representations, whereupon we find that
		\[\op{End}_{\op{HS}}\left(V\right)=\op{End}_{\op{HS}}(V_1)^{m_1\times m_1}\times\cdots\times\op{End}_{\op{HS}}(V_k)^{m_k\times m_k}.\]
		In particular, we see that any $f$ commuting with $\op{End}_{\op{HS}}(V)$ implies that $f$ must preserve each $V_i^{\oplus m_i}$ (because there is a separate algebra $\op{End}_{\op{HS}}\left(V_i^{\oplus m_i}\right)$ for each $i$). Further, $f|_{V_i^{\oplus m_i}}$ must come from the diagonal embedding $\op{End}_{\op{HS}}(V_i)\to\op{End}_{\op{HS}}\left(V_i^{\oplus m_i}\right)$ because $\op{End}_{\op{HS}}(V_i)^{m_i\times m_i}$ may swap any of the $m_i$ copies of $V_i$.
		
		We conclude that $f$ commutes with endomorphisms implies that
		\[f=(\Delta_1f_1,\ldots,\Delta_kf_k),\]
		where $\Delta_i\colon\op{End}(V_i)\to\op{End}\left(V_i^{\oplus m_i}\right)$ is the diagonal embedding, and each $f_i$ commutes with $\op{End}_{\op{HS}}(V_i)$. Conversely, the computation of $\op{End}_{\op{HS}}(V)$ above allows us to conclude that any $f$ in the above form commutes with $\op{End}_{\op{HS}}(V)$.

		\item We work with the polarization. Choose polarizations $\varphi_1,\ldots,\varphi_k$ on $V_1,\ldots,V_k$ (respectively), and we note that these polarizations glue into a polarization $\varphi$ on $V$. With this choice of polarization, we see that $f=(\Delta_1f_1,\ldots,\Delta_kf_k)$ as in the previous step preserves $\varphi$ if and only if each factor $\Delta_if_i$ preserves the polarization $\varphi|_{V_i^{\oplus m_i}}$, which is equivalent to $f_i$ preserving the polarization $\varphi_i$. In total, we thus see that $f\in\op L(V)$ if and only $f_i\in\op L(V_i)$ for each $i$, so we are done.
		\qedhere
	\end{enumerate}
\end{proof}
\Cref{lem:lefschetz-sums} tells us that we can always reduce the computation of the Lefschetz group to irreducible components. In this way, it now suffices to compute $\op L(V)$ by working with $V$ according to the Albert classification (\Cref{thm:albert-classification}). All these computations are recorded in \cite[Section~2]{milne-lefschetz-group}. Because we will only be interested in Type IV in the sequel, we will only record the part of this computation we need for completeness.
\begin{lemma} \label{lem:lefschetz-type-iv-1}
	Fix $V\in\op{HS}_\QQ$ of pure weight with $D\coloneqq\op{End}_{\op{HS}}(V)$ and polarization $\varphi$. Suppose $D=F$ is a CM field. Then
	\[\op L(V)_\CC\cong\op{GL}_{[V:F]}(\CC)^{\frac12[F:\QQ]}.\]
\end{lemma}
\begin{proof}
	We proceed in steps. Let $F^\dagger\subseteq F$ be the maximal totally real subfield, and choose embeddings $\rho_1,\ldots,\rho_{e_0}\colon F^\dagger\into\RR$, where $e_0\coloneqq\frac12[F:\QQ]$. For each $i$, we will let $\sigma_i$ and $\tau_i$ be complex conjugate embeddings $F\into\CC$ restricting to $\rho_i$.
	\begin{enumerate}
		\item We begin by explaining the exponent $e_0=\frac12[F:\QQ]$. Note $V$ is a free $F^\dagger$-module of rank $[V:F]$, so $V_\RR$ is a free module over
		\[F^\dagger\otimes\RR=\prod_{i=1}^{e_0}F_{\rho_i}^\dagger,\]
		where $F_{\rho}^\dagger=\RR$ refers to the $F^\dagger\otimes\RR$ module where $F$ acts by $\rho$. The above decomposition of $F\otimes\RR$ implies a decomposition
		\[V_\RR=V_1\oplus\cdots\oplus V_{e_0},\]
		where each $V_i$ of a vector space over $F^\dagger_{\rho_i}$, all the same dimension.
		
		We now understand the effect of endomorphisms and the polariaztion on our decomposition. Thus, we see that $f\colon V_\RR\to V_\RR$ commutes with $F^\dagger\otimes\RR$ if and only if $f$ preserves each factor $V_i$ (due to the decomposition of $F^\dagger\otimes\RR$) and commute with the action of $F^\dagger_{\rho_i}$ on each $V_i$. Similarly, we see that the polarization $\varphi$ makes the $V_i$s orthogonal: for each $d\in F^\dagger$, we see that any $v_i\in V_i$ and $v_j\in V_j$ has
		\begin{align*}
			\rho_i(d)\varphi(v_i,v_j) &= \varphi(dv_i,v_j) \\
			&= \varphi(v_i,\ov dv_j) \\
			&= \varphi(v_i,dv_j) \\
			&= \rho_j(d)\varphi(v_i,v_j),
		\end{align*}
		so $i\ne j$ implies that $\varphi(v_i,v_j)=0$. Thus, we see that $\varphi$  must restrict to non-degenerate skew-symmetric bilinear forms on each $V_i$ individually. In total, $f\colon V_\RR\to V_\RR$ preserves $\varphi$ if and only if $f|_{V_i}$ preserves $\varphi|_{V_i}$ for each $i$. In total, we see that
		\[\op L(V)_\RR=\op{Sp}_{F\otimes_{\rho_1}\RR}(\varphi|_{V_1})\times\cdots\times\op{Sp}_{F\otimes_{\rho_k}\RR}(\varphi|_{V_{e_0}}).\]

		\item It remains to show that $\op{Sp}_{F\otimes_{\rho_i}\RR}(\varphi|_{V_i})_\CC$ is isomorphic to $\op{GL}_{[V:F]}(\CC)$; here, note $[V:F]=[V_i:F_{\rho_i}^\dagger]$. For this, we abstract the situation somewhat: suppose that a vector space $V$ over $\RR$ has been equipped with an action by $\CC\subseteq\op{End}_{\RR}(V)$, and furthermore, $\varphi$ is a skew-Hermitian form on $V$. Then we want to show $\op{Sp}_{\CC}(\varphi)_\CC\cong\op{GL}_{[V:\RR]}(\CC)$. 

		The trick is that we can keep track of commuting with the action of $\CC$ on $V$ by merely commuting with the action of $i\in\CC$. Thus, let $J\colon V\to V$ be this map, which satisfies $J^2=-1$. Now, the action of $J_\CC$ on $V_\CC$ must diagonalize into eigenspaces $V_i\oplus V_{-i}$ with eigenvalues $i$ and $-i$ respectively; note that we must have $\dim V_i=\dim V_{-i}$ in order for the characateristic polynomial of $J$ to have real coefficients. The point is that $f\in\op{End}(V_\CC)$ commutes with the action of $\CC$ if and only if it commutes with the action of $J$, which we can see is equivalent to $f$ preserving the decomposition $V_i\oplus V_{-i}$.

		We now study the polarization $\varphi$. Note that $\varphi$ vanishes on $V_{\pm i}\oplus V_{\pm i}$: for any $v,v'\in V_{\pm i}$, we see that
		\begin{align*}
			\pm i\varphi(v,v') &= \varphi(Jv,v') \\
			&= \varphi(v,-Jv') \\
			&= \mp i\varphi(v,v'),
		\end{align*}
		from which $\varphi(v,v')=0$ follows. For example, this implies that any $f\in\op{End}(V_\CC)$ commuting with the $J$-action will automatically preserve $\varphi$ on $V_{\pm i}\times V_{\pm i}$. Additionally, we see that $\varphi$ must restrict to a non-degenerate bilinear form on $V_i\times V_{-i}$.
		
		We are now ready to claim that restriction defines an isomorphism $\op{Sp}_\CC(\varphi)_\CC\to\op{GL}_\CC(V_i)$. This restriction does actually output to $\op{GL}_\CC(V_i)$ because $g\in\op{Sp}_\CC(\varphi)_\CC$ must preserve the decomposition $V_i\oplus V_{-i}$. To see the injectivity, we note that preserving $\varphi$ requires
		\[\varphi(v,gw)=\varphi\left(g^{-1}v,w\right)\]
		for all $v\in V_i$ and $w\in V_{-i}$; thus, the non-degeneracy of $\varphi$ implies that $g\in\op{Sp}_\CC(\varphi)_\CC$ is uniquely determined by its action on $V_i$. Conversely, for the surjectivity, we see that we can take any element in $\op{GL}(V_i)$ and use the previous sentence to extend it uniquely to an element of $\op{Sp}_\CC(\varphi)_\CC$.
		\qedhere
	\end{enumerate}
\end{proof}


% type iv discussion

\section{Absolute Hodge Classes}
We now discuss the main application of Hodge structures: cohomology. This will allow us to discuss absolute Hodge classes. Our exposition an abbreviated form \cite{deligne-hodge}.

\subsection{Some Cohomology Theories} \label{subsec:review-cohom}
In this subsection, we will give a lighting introduction to the cohomology theories that we will use. We begin with sheaf cohomology.
\begin{defihelper}[sheaf cohomology] \nirindex{cohomology!sheaf cohomology}
	Fix a topological space $X$. Then the category $\op{Ab}(X)$ of abelian sheaves on $X$ has enough injectives. Given a sheaf $\mc F$ on $X$, we then may define the \textit{sheaf cohomology} as the abelian groups
	\[\mathrm H^i(X,\mc F)\coloneqq\mathrm R^i\Gamma(X,\mc F),\]
	where $\Gamma\colon\op{Ab}(X)\to\op{Ab}$ is the global-sections functor. Explicitly, one can compute these cohomology groups by taking the cohomology of an acyclic resolution of $\mc F$.
\end{defihelper}
This allows us a quick definition of Betti cohomology.
\begin{defihelper}[Betti cohomology] \nirindex{cohomology!Betti cohomology}
	Fix a topological space $X$ and a ring $R$. Then we define the \textit{Betti cohomology} of $X$ with coefficients in $R$ as $\mathrm H^i(X,\underline R)$, where $\underline R$ denotes the constant sheaf $R$.
\end{defihelper}
It will be helpful to a more geometric description of $\mathrm H^\bullet_{\mathrm B}$.
\begin{defihelper}[singular homology, singular cohomology] \nirindex{singular homology} \nirindex{cohomology!singular cohomology}
	Fix a topological space $X$ and a ring $R$. For each $n\ge0$, we define the $n$-simplex $\Delta^n\subseteq\RR^{n+1}$ as the set of points $(t_0,\ldots,t_n)\subseteq[0,1]^{n+1}$ summing to $1$. Then we define the complex $S_\bullet(X,R)$ as having entries which are the free $R$-module with basis given by the maps $\Delta_\bullet\to X$ and boundary morphism given by $\del\colon S_{n}(X,R)\to S_{n-1}(X,R)$ given by
	\[\del(\sigma)\coloneqq\sum_{i=0}^n(-1)^i\sigma([0,\ldots,\widehat i,\ldots,n])\]
	for $\sigma\colon\Delta_n\to X$, where $[0,\ldots,\widehat i,\ldots,n]$ denotes the $(n-1)$-simplex with vertices $\{0,\ldots,\widehat i,\ldots,n\}$. Then we define the \textit{singular homology} $\mathrm H^{\mathrm B}_i(X,R)$ as the homology of this complex. We now define \textit{singular cohomology} as the cohomology of the dual cocomplex $S^\bullet(X,R)$.
\end{defihelper}
\begin{remark}
	The universal coefficient theorem shows that singular homology and cohomology are dual if $R$ is a principal ideal domain, such as $\ZZ$ or a field.
\end{remark}
Our notation suggests that singular cohomology should be Betti cohomology, so we check this.
\begin{theorem}
	Fix a topological manifold $X$. For any field $K$, there is a canonical isomorphism
	\[\mathrm H^i(S^\bullet(X,K))\to\mathrm H^i(X,\underline K).\]
\end{theorem}
\begin{proof}
	The idea is to replace $S^\bullet(X,K)$ with a complex of sheaves $\mc S^\bullet(X,K)$, and then one finds that this complex is an acyclic resolution of $\underline K$. The requirement that $X$ be a topological manifold helps because it allows us to reduce local checks on $X$ to the case of a unit ball.
\end{proof}
We now add smoothness to our manifolds, which allows us to define de~Rham cohomology.
\begin{defihelper}[de Rham cohomology] \nirindex{cohomology!de Rham cohomology}
	Fix a smooth manifold $X$ of dimension $n$. For each $i\ge0$, we let $\Omega_{X_\infty}^i$ be the sheaf of smooth differential $n$-forms on $X$. Then we define \textit{de Rham cohomology} $\mathrm H^i_{\mathrm{dR}}(X,\RR)$ to be the cohomology of the complex
	\[0\to\Omega_{X_\infty}^0\stackrel d\to\Omega_{X_\infty}^2\stackrel d\to\cdots\stackrel d\to\Omega_{X_\infty}^n\to0,\]
	where $d$ denotes the de Rham differential.
\end{defihelper}
We once again have a comparison isomorphism.
\begin{theorem}
	Fix a smooth manifold $X$. For each $i$, there is a functorial perfect paring $\mathrm H_i^{\mathrm B}(X,\RR)\times\mathrm H^i_{\mathrm{dR}}(X,\RR)\to\RR$ given by
	\[\langle\sigma,\omega\rangle\coloneqq\int_\sigma\omega\]
	for each smooth map $\sigma\colon\Delta^i\to X$.
\end{theorem}
We next upgrade to complex K\"ahler manifolds. For example, one can upgrade our de Rham cohomology to use holomorphic differential forms instead of smooth differential forms, and the cohomology does not change. The key benefit of the complex manifold situation is that the de Rham cohomology gains a Hodge structure.
\begin{theorem}
	Fix a compact complex K\"aholer manifold $X$. For each $n\ge0$, there is a decomposition
	\[\mathrm H^i_{\mathrm{dR}}(X,\CC)=\bigoplus_{p+q=n}\mathrm H^{pq}(X),\]
	where $\mathrm H^{pq}(X)\coloneqq\mathrm H^p(X,\Omega^q_X)$.
\end{theorem}
For our last setting, let $X$ be a smooth projective variety over a field $K$. Here, there are multiple ways to form Betti cohomology.
\begin{notation}
	Fix a smooth projective variety over a field $K$. For any embedding $\sigma\colon K\into\CC$, we define Betti cohomology relative to $\sigma$ as
	\[\mathrm H^i_\sigma(X,R)\coloneqq\mathrm H^i_{\mathrm B}(X_\sigma(\CC),R)\]
	forany ring $R$. Frequently, we will have fixed once and for all an embedding of $K$ into $\CC$, so we may abbreviate $\mathrm H^i_\sigma(X,R)$ to just $\mathrm H^i_{\mathrm B}(X,R)$.
\end{notation}
Similarly, one is now able to define de Rham cohomology for $X$, though we do make a moment to remark that there is a theory of algebraic de Rham cohomology that is able to work in greater generality.

Working with varieties gives access to the last cohomology theory we will need.
\begin{defihelper} \nirindex{cohomology!etale cohomology@cohomology!\'etale cohomology}
	Fix a smooth projective variety $X$ over a field $K$. For some \'etale sheaf $\mc F$, we are able to define the \'etale cohomology $\mathrm H^i(X,\mc F)$ in the same way as sheaf cohoomology. In particular, for any prime $\ell$ which is nonzero in $K$, we define the \textit{$\ell$-adic cohomology} by
	\[\mathrm H^i_{\mathrm{\acute et}}(X_{\ov K},\QQ_\ell)\coloneqq\left(\limit\mathrm H^i_{\mathrm{\acute et}}(X_{\ov K},\underline{\ZZ/\ell^\bullet\ZZ})\right)\otimes_\ZZ\QQ\]
\end{defihelper}
Importantly, we note that \'etale cohomology has the natural action by $\op{Gal}(\ov K/K)$. As usual, there is a comparison isomorphism.
\begin{theorem}
	Fix a smooth projective variety $X$ over $\CC$. Then there is a natural isomorphism
	\[\mathrm H^i_{\mathrm B}(X,\QQ_\ell)\to\mathrm H^i_{\mathrm{\acute et}}(X_{\ov K},\QQ_\ell).\]
\end{theorem}
For convenience, we may find it convenient to glue our cohomology theories together.
\begin{notation}
	Fix a smooth projective variety $X$ over a field $K$ with an embedding $\sigma\colon K\into\CC$. Then we define
	\[\mathrm H^i_{\AA}(X)\coloneqq\mathrm H^i_{\mathrm{dR}}(X,\RR)\times\left(\limit_n\mathrm H^i_{\mathrm{\acute et}}(X_{\ov K},\underline{\ZZ/n\ZZ})\otimes_\ZZ\QQ\right).\]
	We note that there are natural projections $\pi_\infty$ onto $\mathrm H^i_{\mathrm{dR}}(X,\RR)$ and $\pi_\ell$ onto $\mathrm H^i_{\mathrm{\acute et}}(X_{\ov K},\QQ_\ell)$.
\end{notation}
\begin{remark}
	One can realize this as a restricted direct product
	\[\mathrm H^i_{\mathrm{dR}}(X,\RR)\times\prod_\ell\left(\mathrm H^i_{\mathrm{\acute et}}(X_{\ov K},\QQ_\ell),\mathrm H^i_{\mathrm{\acute et}}(X_{\ov K},\ZZ_\ell)\right),\]
	which provides some motivation for the $\AA$ in the notation.
\end{remark}

\subsection{The Definition}
To define absolute Hodge classes following \cite{deligne-hodge}, we must first discuss Tate twists. These change depending on our cohomology theory.
\begin{definition}[Tate twist]
	We define our Tate twists as follows.
	\begin{itemize}
		\item If $X$ is a topological manifold, then the Tate twist $\QQ_{\mathrm B}(1)$ is the $\QQ$-vector space $2\pi i\QQ$.
		\item If $X$ is a smooth manifold, then the Tate twist $\RR_{\mathrm{dR}}(1)$ is simply $\RR$. It has a Hodge structure of pure of weight $-2$ concentrated in bidegree $(-1,-1)$.
		\item If $X$ is a smooth projective variety over a field $K$, then the Tate twist $\QQ_\ell(1)$ for any prime $\ell$ (nonzero in $K$) is the Galois representation $(\limit\mu_{\ell^\bullet})\otimes_\ZZ\QQ$.
	\end{itemize}
\end{definition}
\begin{notation}
	For any cohomology theory $\mathrm H$ defined on a space $X$, we may write
	\[\mathrm H^i(X)(n)\coloneqq\mathrm H^i(X)\otimes\mathrm T^{\otimes n},\]
	where $\mathrm T$ denotes the Tate twist, and $i\ge0$ and $n\in\ZZ$. If $n\le0$, then we take the dual.
\end{notation}
As an example application, we want the Hodge classes on a complex K\"ahler manifold $X$ to be elements of the cohomology group $\mathrm H^{2p}_{\mathrm{dR}}(X,\CC)(p)$ of bidegree $(0,0)$ and satisfying some rationality condition. The definition of an absolute Hodge class comes from trying to be agnostic about the embedding of the base field of $X$.
\begin{definition}[absolute Hodge class]
	Fix a smooth projective variety $X$ over a number field $K$. An \textit{absolute Hodge class} is an element $t$ of some $\mathrm H^{2p}_\AA(X_{\ov K})(p)$ if and only if it satisfies the following properties.
	\begin{itemize}
		\item $\pi_\infty(t)$ lives in the component $(0,0)$ of $\mathrm H^{2p}_{\mathrm{dR}}(X,\CC)$.
		\item For each embedding $\sigma\colon K\into\CC$, the element $t$ is in the image of the embedding $\mathrm H^{2p}_{\mathrm B}(X,\QQ)(p)$ into $\mathrm H^{2p}_\AA(X)(p)$.
	\end{itemize}
	We denote the collection of these absolute Hodge classes by $C^p_{\mathrm{AH}}(X_{\ov K})$ or $C^p_{\mathrm{AH}}(X)$.
\end{definition}
\begin{remark}
	Deligne \cite[Section~2]{deligne-hodge} gives a definition for smooth projective varieties defined over a general field of characteristic $0$. The above definition makes sense essentially verbatim for any field $K$ of characteristic $0$ and finite transcendence degree because then one has access to embeddings into $\CC$. For the general case, one must argue that any class with sufficient rationality properties will descend to a field of finite transcendence degree and that the choice of this descent does not matter.
\end{remark}
% While we're here, we give an application of absolute Hodge classes.
% definition of absolute hodge cycles
% construction works
% \begin{theorem}[Deligne] \label{thm:hodge-to-abs-hodge}
	
% \end{theorem}
% \begin{theorem}[Principle B] \label{thm:principle-b}
	
% \end{theorem}
% \begin{proposition} \label{prop:construct-abs-hodge}
% 	Construction of absolute Hodge cycle. \cite[Proposition~7.1]{deligne-hodge}.
% \end{proposition}

\end{document}