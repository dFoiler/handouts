\documentclass{article}
\usepackage[utf8]{inputenc}

\newcommand{\nirpdftitle}{Motives}
\usepackage{import}
\inputfrom{../../notes}{nir}
\usepackage[backend=biber,
    style=alphabetic,
    sorting=ynt
]{biblatex}
\setcounter{tocdepth}{2}

\pagestyle{contentpage}

\title{Motives}
\author{Nir Elber}
\date{Spring 2024}
\usepackage{graphicx}

\begin{document}

\maketitle

\tableofcontents

\section{Introduction}
Here is the statement of the conjecture.
\begin{conj} \label{conj:desired-conjecture}
	Fix an abelian motive $A$ over a number field $K$, and let $G(A)$ denote the motivic Galois group of $A$. Suppose $A$ has good reduction at a prime $\mf p$ of $K$. Then there exists a class $F\in\op{Conj}G(A)(\QQ)$ such that
	\[F=[\rho_\ell(\mathrm{Frob}_\mf p)]\]
	for each rational prime $\ell\nmid\mf p$, where $\rho_\ell\colon\op{Gal}(\ov K/K)\to\op{GL}\left(H^1_{\mathrm{\acute et}}(A;\QQ_\ell)\right)$ is the $\ell$-adic Galois representation.
\end{conj}

\section{Background on Motives}
Throughout, $X$ denotes a smooth proper variety over a field $k$, which is possibly but not definitely algebraically closed.

\subsection{Tannakian Formalism}
Approximately speaking, the theory of (pure) motives takes the category of smooth proper varieties and attempts to give this category a long list of desirable properties. Tannakian formalism enumerates the desiderata. Our exposition follows \cite{milne-tannakian} and \cite[Chapters~2 and~6]{andre-motive}.
\begin{warn}
	We will not need any proofs from the theory of Tannakian formalism, so we will not provide them.
\end{warn}
Intuitively, a Tannakian category is one that looks like the category $\op{Rep}_k(G)$ of finite-dimensional representations of an affine $k$-group $G$. An important property of $\op{Rep}_k(G)$ is the ability to take tensor products, so we codify how useful tensor products are.
\begin{definition}[monoidal]
	A \textit{monoidal category} or \textit{$\otimes$-category} is a category $\mc C$ equipped with a bifunctor $\otimes\colon\mc C\times\mc C\to\mc C$ and identity object $1\in\mc C$ with the following identities.
	\begin{itemize}
		\item Associativity: there is a natural isomorphism $\alpha\colon((-\otimes-)\otimes-)\Rightarrow(-\otimes(-\otimes-))$.
		\item Identity: there are natural isomorphisms $(1\otimes-)\Rightarrow-$ and $(-\otimes1)\Rightarrow1$.
	\end{itemize}
	These isomorphisms satisfy certain coherence properties ensuring that one can associate and apply identity naturally in any suitable situation.
\end{definition}
In fact, $\op{Rep}_k(G)$ has a symmetry property.
\begin{definition}[symmetric monoidal]
	A \textit{symmetric monoidal category} is a monoidal category $\mc C$ further equipped with a symmetry isomorphism $(-\otimes-)\Rightarrow(-\otimes-)$ such that the composite
	\[(A\otimes B)\to(B\otimes A)\to(A\otimes B)\]
	is the identity.
\end{definition}
The reason we restricted $\op{Rep}_k(G)$ to finite-dimensional representations is so that we can take duals.
\begin{definition}[rigid]
	A rigid symmetric monoidal category is a symmetric monoidal category $\mc C$ further equipped with a natural isomorphism $(-)^\lor\colon\mc C\to\mc C\opp$ such that each $A\in\mc C$ makes $(-\otimes A^\lor)$ is left adjoint to $(-\otimes A)$, and $(A^\lor\otimes-)$ is right adjoint to $(A\otimes-)$.
\end{definition}
\begin{remark}
	Rigidity permits a notion of dimension of an object $A\in\mc C$ as the composite
	\[1\to A^\lor\otimes A\to A\otimes A^\lor\to1.\]
\end{remark}
Lastly, $\op{Rep}_k(G)$ has a forgetful functor to $\op{Vec}_k$, akin to the forgetful functor $\op{Set}(G)\to\op{Set}$ which appears in Grothendieck's Galois theory (used to define the \'etale fundamental group).
\begin{definition}[fiber functor]
	Fix an abelian rigid symmetric monoidal category $\mc C$ such that $F\coloneqq\op{End}(1)$ is a field. A \textit{fiber functor} is a faithful exact $\otimes$-functor $\omega\colon\mc C\to\op{Vec}_k$ for some finite field extension $k$ of $F$. If $k=F$, then we say that $\mc C$ is \textit{neutral Tannakian over $k$}.
\end{definition}
What is remarkable is that it turns out that one can recover the affine $k$-group $G$ from the (forgetful) fiber functor $\omega\colon\op{Rep}_k(G)\to\op{Vec}_k$ as ``$\underline{\op{Aut}}^\otimes(\omega)$.'' Explicitly, for a $k$-algebra $R$, an element of $\underline{\op{Aut}}^\otimes(\omega)(R)$ is a collection of automorphisms $(g_X)_{X\in\op{Rep}_k(G)}$ where $g_X$ is an $R$-linear automorphism of $\omega(X)\otimes_kR$, and these automorphisms are natural in $G$-linear maps $X\to Y$.

This process can in general recover a group $G$ from a neutral Tannakian category.
\begin{theorem}
	Fix a neutral Tannakian category $\mc C$ over a field $k$ equipped with fiber functor $\omega\colon\mc C\to\op{Vec}_k$.
	\begin{listalph}
		\item The functor $\underline{\op{Aut}}^\otimes(\omega)$ (defined analogously as above) is represented by an affine $k$-group $G$.
		\item The fiber functor $\omega$ then upgrades to a $\otimes$-equivalence $\mc C\to\op{Rep}_k(G)$.
	\end{listalph}
\end{theorem}
\begin{proof}
	See \cite[Theorem~2.11]{milne-tannakian}.
\end{proof}
It will be helpful to have some more concrete ways to understand $G$ from its Tannakian category. For example, if the Tannakian category is small, then $G$ should also be small. The following two propositions examine two versions of smallness.
\begin{definition}[$\otimes$-subcategory]
	Fix an abelian rigid symmetric monoidal category $\mc C$. Then the \textit{full $\otimes$-subcat\-egory} generated by a subset $S\subseteq\mc C$ of objects, denoted $\langle S\rangle^{\otimes}$ is the smallest abelian rigid monoidal subcategory.
\end{definition}
\begin{proposition}
	Fix an affine $k$-group $G$.
	\begin{listalph}
		\item Then $G$ is finite if and only if there is an object $X$ such that every object of $\op{Rep}_k(G)$ is a subquotient of $X^{\oplus n}$ for some nonnegative $n$.
		\item Then $G$ is algebraic (namely, finite type over $k$) if and only if $\op{Rep}_k(G)$ equals $\langle X\rangle^{\otimes}$ for some object $X$.
	\end{listalph}
\end{proposition}
\begin{proof}
	See \cite[Proposition~2.20]{milne-tannakian}.
\end{proof}
\begin{proposition}
	Fix a field $k$ of characteristic $0$ and an affine $k$-group $G$. Then $G^\circ\subseteq G$ is a projective limit of reductive $k$-groups if and only if $\op{Rep}_k(G)$ is semisimple.
\end{proposition}
\begin{proof}
	See \cite[Remark~2.28]{milne-tannakian}.
\end{proof}
Lastly, we will also want some functoriality. Approximately speaking, we expect surjections/injections of groups to correspond to ``surjections/injections'' of categories.
\begin{proposition}
	Fix a morphism $f\colon G\to G'$ of affine $k$-groups $G$, and let $\omega\colon\op{Rep}_k(G')\to\op{Rep}_k(G)$ be the corresponding functor.
	\begin{listalph}
		\item Suppose $\op{Rep}_k(G)$ is semisimple and that $k$ has characteristic $0$. Then $f$ is faithfully flat if and only if the following holds: for given $X'\in\op{Rep}_k(G')$, every subobject of $\omega(X')$ is isomorphic to $\omega(Y')$ for some subobject $Y'$ of $X'$.
		\item Then $f$ is a closed embedding if and only if every object $X\in\op{Rep}_k(G)$ is isomorphic to a subquotient of $\omega(X')$ for some $X'\in\op{Rep}_k(G')$.
	\end{listalph}
\end{proposition}
\begin{proof}
	Combine \cite[Remark~2.29]{milne-tannakian} with \cite[Proposition~2.21]{milne-tannakian}.
\end{proof}

\subsection{Review of Cohomology}
In this subsection, we review various cohomology theories, approximately following \cite[Section~1]{deligne-hodge}. We begin by discussing what is expected from a cohomology theory.
\begin{definition}[Weil cohomology]
	Let $\mc P(k)$ denote the category of smooth proper $k$-varieties. \todo{}
\end{definition}

\subsection{Hodge Structures}
The previous subsection mentioned that the cohomology $H^\bullet(X,\CC)$ of a complex projective variety $X$ admits a ``Hodge structure'' meaning that one has a decomposition
\[H^n(X,\CC)\cong\bigoplus_{p+q=n}H^{p,q}\]
where $H^{p,q}=\ov{H^{q,p}}$. What is interesting about this situation is that we begin with a $\QQ$-vector space $H^n(X,\CC)$, which then inherits the above decomposition only after base-change to $\CC$. This structure is what makes our complex-analytic cohomology interesting, so we give it a name.
\begin{definition}[Hodge structure]
	A \textit{$\QQ$-Hodge structure} of weight $m\in\ZZ$ is a finite-dimensional vector space $V\in\op{Vec}_\QQ$ such that $V_\CC$ admits a decomposition
	\[V_\CC=\bigoplus_{p+q=m}V^{p,q}_\CC\]
	where $V^{p,q}_\CC=\ov{V^{q,p}_\CC}$. We let $\op{HS}_\QQ$ denote the category of $\QQ$-Hodge structures, where a morphism of Hodge structures is a linear map preserving the decomposition over $\CC$.
\end{definition}
\begin{example}
	Give the Tate twist $\QQ(1)=2\pi i\QQ$ a Hodge structure of weight $-2$ where $\QQ(1)^{-1,-1}=\QQ(1)$ is nonzero.
\end{example}
The category $\op{HS}_\QQ$ becomes a faithful rigid tensor abelian subcategory of $\op{Vec}_\QQ$, where the forgetful functor is able to act as a fiber functor. As such, so we expect $\op{HS}_\QQ$ should arise from representations of some group. Let's explain how this is done.
\begin{notation}[Deligne torus]
	Let $\mathbb S\coloneqq\op{Res}_{\CC/\RR}\mathbb G_{m,\CC}$ denote the Deligne torus. We also let $w\colon\mathbb G_{m,\RR}\to\mathbb S$ denote the \textit{weight cocharacter} given by $w(r)\coloneqq r\in\CC$ on $\RR$-points.
\end{notation}
\begin{remark} \label{rem:concrete-deligne-torus}
	One can realize $\mathbb S$ more concretely as
	\[\mathbb S(R)=\left\{\begin{bmatrix}
		a & b \\ -b & a
	\end{bmatrix}\in{\op{GL}_2(R)}:a^2+b^2\in R^\times\right\},\]
	where $R$ is an $\mathbb R$-algebra. Indeed, there is a ring isomorphism from $R\otimes_\RR\CC$ to $\left\{\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}:a,b\in R\right\}$ by sending $1\otimes1\mapsto\begin{bsmallmatrix}
		1 \\ & 1
	\end{bsmallmatrix}$ and $1\otimes i\mapsto\begin{bsmallmatrix}
		1 \\ & -1
	\end{bsmallmatrix}$.
\end{remark}
We now explain how a representation of $\mathbb S$ converts to a Hodge structure.
\begin{lemma} \label{lem:hodge-by-s}
	Fix some $V\in\op{Vec}_\QQ$. Then a Hodge structure on $V$ has equivalent data to a representation $h\colon\mathbb S\to\op{GL}(V)_\RR$.
\end{lemma}
\begin{proof}
	\Cref{rem:concrete-deligne-torus} informs us that the character group $X^*(\mathbb S)$ of group homomorphisms $\mathbb S\to\mathbb G_m$ is a rank-$2$ free $\ZZ$-module generated by $z\colon\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}\mapsto a+bi$ and $\ov z\colon\begin{bsmallmatrix}
		a & b \\ -b & a
	\end{bsmallmatrix}\mapsto a-bi$ on $\CC$-points.\footnote{Alternatively, note one has an isomorphism $(\CC\otimes_\RR\CC)^\times\cong\CC^\times\times\CC^\times$ by sending $(z,w)\mapsto z\otimes w$. Then these two characters are $(z,w)\mapsto z$ and $(z,w)\mapsto w$.} Without too many details, upon passing to the Hopf algebra, one is essentially looking for units in $\RR\left[a,b,\left(a^2+b^2\right)^{-1}\right]$, of which there are not many. Note that there is a Galois action by $\op{Gal}(\CC/\RR)$ on these two characters $\{z,\ov z\}$, given by swapping them. Let $\iota\in\op{Gal}(\CC/\RR)$ denote complex conjugation, for brevity.

	Now, a representation $h\colon\mathbb S\to\op{GL}(V)_\RR$ must have $V_\CC$ decompose into eigenspaces according to the characters $X^*(\mathbb S)$, so one admits a decomposition
	\[V_\CC=\bigoplus_{\chi\in X^*(\mathbb S)}V_\CC^\chi.\]
	However, one also needs $V_\CC^{\iota\chi}=\ov{V_\CC^\chi}$ because $\iota$ swaps $\{\chi,\iota\chi\}$. By Galois descent, this is enough data to (conversely) define a representation $h\colon\mathbb S\to\op{Gal}(V)_\RR$.

	To relate the previous paragraph to Hodge structures, we recall that $X^*(\mathbb S)$ is a rank-$2$ free $\ZZ$-module, so write $\chi_{p,q}\coloneqq z^{-p}\ov z^{-q}$ so that $\iota\chi_{p,q}=\chi_{q,p}$. Setting $V_\CC^{p,q}\coloneqq V_\CC^{\chi_{p,q}}$ now explains how to relate the previous paragraph to a Hodge structure, as desired.
\end{proof}
\begin{remark}
	The weight of a Hodge structure on some $V\in\op{HS}_\QQ$ can be read off of $h$ as follows: note the weight cocharacter $h\circ w$ equals the $(-m)$th power map if and only if the weight is $m$. 
\end{remark}
Thus, we see that one has tensor products and duals of Hodge structures by tracking through the representation of $h$. For example, if $V\in\op{HS}_\QQ$ has $V^\lor$ inherit a Hodge structure by $(V^\lor)^{p,q}\coloneqq (V^{-p,-q})^\lor$. In particular, $\op{HS}_\QQ$ becomes Tannakian.\todo{}

% polarizable HS

\subsection{The Mumford--Tate Group}
We are now ready to define the main character of the present subsection, which is the Mumford--Tate group.\todo{}
\begin{definition}[Mumford--Tate group]
	For some $V\in\op{HS}_\QQ$, we define the \textit{Mumford--Tate group} $\op{MT}(V)$ as the smallest algebraic $\QQ$-group containing the image of the corresponding representation $h\colon\mathbb S\to\op{GL}(V)_\RR$.\todo{Fix}
\end{definition}
\begin{remark}
	Because $\mathbb S$ is connected, we see that $h$ is also connected. Namely, $\op{MT}(V)^\circ\subseteq\op{MT}(V)$ will be an algebraic $\QQ$-group containing the image of $h$ if $\op{MT}(V)$ does too, so equality is forced.
\end{remark}
It will turn out that $\op{MT}(V)$ is the algebraic group corresponding the full Tannakian subcategory $\langle V\rangle^{\otimes}$ of $\op{HS}_\QQ$. Unraveling the formalism, the key point is the following proposition.
\begin{proposition}
	Fix $V\in\op{HS}_\QQ$. Suppose $T\in\op{HS}_\QQ$ can be written as
	\[T=\bigoplus_{i=1}^N\left(V^{\otimes m_i}\otimes (V^\lor)^{\otimes n_i}\right)(p_i),\]
	where $m_i,n_i\ge0$ are nonnegative integers and $p_i\in\ZZ$. Then $W\subseteq T$ is a Hodge substructure if and only if the action of $\op{MT}(V)$ on $T$ stabilizes $W$.
\end{proposition}
\begin{proof}
	For each vector space in $\op{HS}_\QQ$, we let $h_\bullet$ denote the corresponding representation. Quickly, note that $h_T$ In the backwards direction, we note that $\op{MT}(V)$ stabilizing $W$ implies that $h(s)$ stabilizes $W_\RR$ for any $s$. We can thus view $W_\RR\subseteq T_\RR$ as a subrepresentation of $\mathbb S$, so taking eigenspaces reveals that $W$ can be given the structure of a Hodge substructure of $T$.

	The converse will have to use the construction of $T$. Indeed, suppose that $W\subseteq T$ is a Hodge substructure, and let $M\subseteq\op{GL}(V)$ be the smallest algebraic $\QQ$-group stabilizing $W\subseteq T$. We would like to show that $\op{MT}(V)\subseteq M$. By definition of $\op{MT}(V)$, it is enough to show that $h$ factors through $M_\RR$, meaning we must show that $h(s)$ stabilizes $W$ for each $s\in\mathbb S$. Well, $h(s)$ will act by characters on the eigenspaces $W^{p,q}_\CC\subseteq W_\CC$, so $h(s)$ does indeed stabilize $W$.
\end{proof}
\begin{corollary}
	Fix $V\in\op{HS}_\QQ$. Then $\op{MT}(V)$ is the group corresponding to the Tannakian subcategory $\langle V\rangle^{\otimes}$ of $\op{HS}_\QQ$.
\end{corollary}
\begin{proof}
	\todo{}
\end{proof}
\begin{proposition} \label{prop:mt-cm-torus}
	The Mumford--Tate group of an abelian variety with CM is a torus.
\end{proposition}
Define the Hodge group via $\mathbb U$.\todo{}

\subsection{The Rank of a CM Type}
\Cref{prop:mt-cm-torus} explains that the Mumford--Tate group of an abelian variety with CM is a torus, so it is a natural question to ask about the rank of this torus. In this subsection, we will discuss a little about what is known about this rank. Our exposition largely follows \cite[Section~6.1]{lang-cm}.

Throughout this subsection, $A$ is an absolutely simple abelian variety defined over a number field with CM type $(K,\Phi)$. We let $(K^*,\Phi^*)$ denote the reflex field and reflex CM type and pick up the following definition.
\begin{definition}[rank]
	Fix a CM type $(K,\Phi)$. Then the \textit{rank} $\op{rank}(K,\Phi)$ of $(K,\Phi)$ is the $\QQ$-dimension of the image of the map $\op T_\Phi\colon K\to K^*$ given by
	\[\op T_\Phi(\alpha)\coloneqq\sum_{\varphi\in\Phi}\varphi(\alpha).\]
\end{definition}
\begin{remark} \label{rem:combinatorial-cm-rank}
	Notably, the rank does not change upon passing to a Galois closure $L$ of $K/\QQ$ because $\op T_\Phi$ will simply become ${\op T_\Phi}\circ\op T_{L/K}$, and field traces of number fields are surjective. In the event where $K/\QQ$ is Galois with $G\coloneqq\op{Gal}(K/\QQ)$, we note that the existence of a normal basis implies that
	\[\op{rank}(K,\Phi)=\dim_\QQ\Phi\QQ[G],\]
	where we view $\Phi$ as an element of $\ZZ[G]$ given by the sum of its elements. Similarly, one can go down to $\op{rank}_\ZZ\Phi\ZZ[G]$ and even multiply by $\Phi$ on either side.
\end{remark}
\begin{remark} \label{rem:reduce-to-primitive-cm-rank}
	Notably, because the discussion in \Cref{rem:combinatorial-cm-rank} is largely independent of $L$ (except for requiring $L/K$ to be Galois), we see that
	\[\op{rank}(K,\Phi)=\op{rank}(L,\Phi_L)=\op{rank}(K_0,\Phi_0)\]
	where $(L,\Phi_L)$ is the extension of $(K,\Phi)$ to $L$, and $(K_0,\Phi_0)$ is the primitive CM type extending to $(K,\Phi)$.
\end{remark}
\begin{remark} \label{rem:dual-cm-rank}
	Using \Cref{rem:combinatorial-cm-rank}, we note that $\op{rank}(K,\Phi)=\op{rank}(K^*,\Phi^*)$ because, upon passing all ranks and types to a Galois closure, sending $\sigma\mapsto\sigma^{-1}$ will map $\Phi\QQ[G]$ to $\QQ[G]\Phi^*$, showing that the $\QQ$-dimen\-sions of these spaces are equal.
\end{remark}
The importance of this definition is as follows.
\begin{proposition}
	Fix an abelian variety $A$ defined over a number field with CM type $(K,\Phi)$. Then
	\[\dim\op{MT}(A)=\op{rank}(K,\Phi).\]
\end{proposition}
\begin{proof}
	We follow the argument of \cite[Proposition~1.1]{yanai-degenerate-cm-type}.
	\begin{enumerate}
		\item To set up our discussion, we set some notation. Given a number field $F$, we set $T_F\coloneqq\op{Res}_{F/\QQ}\mathbb G_m$ and $X_F\coloneqq X^*(T_F)$; note that $X_F$ is the free abelian group generated by the set $\Gamma_F\coloneqq\op{Hom}(F,\CC)$. For example, the reflex norm $\op N_{\Phi^*}\colon (K^*)^\times\to K^\times$ (note $K^{**}\subseteq K$) can actually be viewed as a map $\op N_{\Phi^*}\colon T_{K^*}\to T_K$ of $\QQ$-tori and hence induces a map $\op T_{\Phi^*}\colon X_K\to X_{K^*}$ on character groups defined by
		\[\op T_{\Phi^*}(x)\coloneqq\sum_{\tau\in\Phi^*}x\tau=x\Phi^*.\]
		To properly understand the product $\tau x$ (and ones similar to it in the following argument), one should extend all embeddings to $\op{Gal}(\ov\QQ/\QQ)$, but the above construction of $\op T_{\Phi^*}$ explains why the definition is independent of these choices of liftings.

		\item With this notation in place, we take a moment to describe $\op{MT}(A)$ in terms of these tori. By the proof of \Cref{prop:mt-cm-torus}, we see that the Hodge structure $h\colon\mathbb S\to\op{GL}\left(H^1_B(A;\QQ)\right)$ factors through $T_K$. In fact, by definition of the CM type $(K,\Phi)$, we see that
		\[H^{10}\cong\bigoplus_{\varphi\in\Phi}\CC_\varphi,\]
		so the Hodge structure $h$ is given by the torus map $X^*(h)\colon X_K\to X^*(\mathbb S)$ defined by
		\[\varphi\mapsto\begin{cases}
			z^{-1} & \text{if }\varphi\in\Phi, \\
			\ov z^{-1} & \text{if }\varphi\notin\Phi,
		\end{cases}\]
		where $z,\ov z\colon X^*(\mathbb S)$ are the two characters of \Cref{lem:hodge-by-s}. (Namely, the map $X^*(h)$ is intended to provide an $\mathbb S$-action on $H^1_B(A;\QQ)$ from which the Hodge structure $H^{01}\oplus H^{10}$ upon base-changing to $\CC$. But we already understand the decomposition via the eigenspaces of $\Gamma_K$!) Now, identifying $X^*(\mathbb U)$ with $\ZZ$ via $z^{-1}\mapsto1$, we see that $\op{Hg}(A)$ is the smallest algebraic $\QQ$-group containing the image of the torus map $\mathbb U\to T_K$ defined on characters by
		\[\varphi\mapsto\begin{cases}
			+1 & \text{if }\varphi\in\Phi, \\
			-1 & \text{if }\varphi\notin\Phi.
		\end{cases}\]

		\item The main claim is that $x\in X_K$ is trivial on $\op{Hg}(A)$ if and only if $\op T_{\Phi^*}(x)$ is an integral multiple of
		\[\theta\coloneqq\sum_{\tau\in\Gamma_{K^*}}\tau.\]
		To see how this claim completes the proof, we note that it implies that we may carry out the computation
		\begin{align*}
			\dim\op{MT}(A) &= 1+\dim\op{Hg}(A) \\
			&= 1+\op{rank}_\ZZ X^*(\op{Hg}(A)) \\
			&= 1+\op{rank}_\ZZ X_K-\op{rank}_\ZZ\{x\in X_K:x|_{\mathrm{Hg}(A)}=1\} \\
			&= 1+\op{rank}_\ZZ X_K-\op{rank}_\ZZ\op T_{\Phi^*}^{-1}(\ZZ\theta) \\
			&= \op{rank}_\ZZ X_K-\op{rank}_\ZZ\ker\op T_{\Phi^*} \\
			&= \op{rank}_\ZZ\im \op T_{\Phi^*} \\
			&= \op{rank}_\ZZ\ZZ[\Gamma_{K^*}]\Phi^*,
		\end{align*}
		which is what we wanted upon comparing with \Cref{rem:combinatorial-cm-rank,rem:dual-cm-rank}.

		\item It remains to show the main claim. To begin, note that $x=\sum_{\sigma\in\Gamma_K}n_\sigma\sigma$ is trivial on $\op{Hg}(A)$ if and only if $gx$ is trivial on $\im h|_{\mathbb U}$ for all $g\in\op{Gal}(\ov\QQ/\QQ)$. (Without the extra $g$, we would be trivial on the smallest $\ov\QQ$-subgroup of $T_K$ containing $\im h|_{\mathbb U}$, so we add in the $\op{Gal}(\ov\QQ/\QQ)$-action to allow for our Galois descent to $\op{Hg}(A)$.) Continuing, $xg$ is trivial on $\im h|_{\mathbb U}$ if and only if $xg\circ h|_{\mathbb U}$ is trivial, which is equivalent to $X^*(h|_{\mathbb U})(gx)$ being trivial, which we can compute is equivalent to
		\[\sum_{g\sigma\in\Phi}n_\sigma=\sum_{g\sigma\notin\Phi}n_\sigma.\]
		Of course, we note that these sums being equal is equivalent to either of them being equal to $\frac12\sum_\sigma n_\sigma$.

		On the other hand, setting $x=\sum_{\sigma\in\Gamma_K}n_\sigma\sigma$ allows us to compute $\op T_{\Phi^*}(x)$ as
		\[\op T_{\Phi^*}(x)=\sum_{\substack{\tau\in\Phi^*\\\sigma\in\Gamma_K}}n_\sigma\sigma\tau.\]
		Now, we see that $\op T_{\Phi^*}(x)$ is a multiple of $\theta$ if and only if the sum
		\[\sum_{\substack{\tau\in\Phi^*\\\sigma\in\Gamma_K\\\sigma\tau=\mu}}n_\sigma\]
		does not depend on $\mu\in\Gamma_{K^*}$.\footnote{The equality $\sigma\tau=\mu$ is understood to be an equality of embeddings on $K^*$, despite our aforementioned convention that all these elements in fact live in $\op{Gal}(\ov\QQ/\QQ)$. If one is concerned with rigor, feel free to pass all automorphisms up to a fixed Galois closure $L$ of $K$ over $\QQ$ and replace all sums with sums over all possible extensions to automorphisms $L\to L$.} However, we see
		\[\sum_{\substack{\tau\in\Phi^*\\\sigma\in\Gamma_K\\\sigma\tau=\mu}}n_\sigma=\sum_{\substack{\tau\in\Phi^*\\\sigma\in\Gamma_K\\\mu^{-1}\sigma=\tau^{-1}}}n_\sigma=\sum_{\substack{\mu^{-1}\sigma\in\Phi}}n_\sigma\]
		having value of independent of $\mu$ means that the sum for $\mu^{-1}$ and $\iota\mu^{-1}$ have the same value, which we noted above is equivalent for this sum to equal $\frac12\sum_\sigma n_\sigma$. A comparison with our discussion at the end of the previous paragraph completes the proof.
		\qedhere
	\end{enumerate}
\end{proof}
The point is that we have achieved a combinatorial description of $\dim\op{MT}(A)$. For example, if we are able to show that $\op{rank}(K,\Phi)=\dim A+1$, then we are able to conclude that $\op{MT}(A)$ must be equal to the maximal torus inside $\op{GSp}_{2\dim A}(\QQ)$.

Here are some quick bounds on the rank; for example, for large degrees, we expect the rank to be relatively large.
\begin{proposition} \label{prop:cm-rank-bound}
	Fix a CM type $(K,\Phi)$ which is an extension of the primitive CM type $(K_0,\Phi_0)$. Then
	\[1+\log_2[K_0:\QQ]\le\op{rank}(K,\Phi)\le\frac12[K_0:\QQ]+1.\]
\end{proposition}
\begin{proof}
	We follow \cite[Theorem~1.2]{lang-cm}; we show the inequalities separately.
	\begin{itemize}
		\item For the right inequality, we may as well take $K=K_0$ by \Cref{rem:reduce-to-primitive-cm-rank}. Letting $K_0^+$ be the totally real subfield of $K_0$, the main point is that
		\[{\op T_{K/K^+}}\circ{\op T_\Phi}=\op T_{K/\QQ}\]
		because $(K,\Phi)$ is a CM type. Thus, $\dim_\QQ\op T_{K/K^+}(T_\Phi(K))=1$, but $\op T_{K/K^+}\colon K\to K^+$ is surjective with kernel of dimension $\frac12[K:\QQ]$, so the result follows. 
		\item For the left inequality, we may as well assume that $K/\QQ$ is Galois by \Cref{rem:combinatorial-cm-rank,rem:reduce-to-primitive-cm-rank}. Set $G\coloneqq\op{Gal}(K/\QQ)$, and let $H\subseteq G$ consist of those automorphisms $\sigma$ such that $\Phi\sigma=\Phi$; note $H$ is the subgroup fixing $K^*$. By taking the reflex field (which is legal by \Cref{rem:dual-cm-rank}), it suffiees to show that
		\[\dim_{\FF_2}\Phi\FF_2[G]\stackrel?\ge1+\log_2[K^*:\QQ],\]
		for which we will actually show
		\[\#\Phi\FF_2[G]\stackrel?\ge2[K^*:\QQ].\]
		For this, we need to exhibit at least $2[K_0:\QQ]=2\cdot\#\left(H\backslash G\right)$ elements in $\#\Phi\FF_2[G]$, so we choose the elements
		\[\{\Phi\sigma:\sigma\in H\backslash G\}\sqcup\{\Phi+\Phi\sigma:\sigma\in H\backslash G\}.\]
		It is enough to show that these elements are distinct in $\FF_2[G]$. For example, $\Phi\sigma\equiv\Phi\sigma'$ would imply $\Phi\sigma'\sigma^{-1}\equiv\Phi$ and hence $\sigma'\sigma^{-1}\in H$ and hence $\sigma=\sigma'$ by definition of $H$. Similarly, one sees that the elements $\Phi+\Phi\sigma$ are pairwise distinct. Lastly, we see that we can never have $\Phi\sigma\equiv\Phi+\Phi\sigma'$ because this would imply
		\[\Phi+\Phi\iota\equiv\Phi+\Phi\iota+\underbrace{\Phi\sigma'+\Phi\sigma'\iota}_{=\Phi+\Phi\iota}\equiv0,\]
		where $\iota$ denotes complex conjugation; this is a contradiction.
		\qedhere
	\end{itemize}
\end{proof}
\begin{example}
	If $A$ is an absolutely simple abelian variety with CM type $(K,\Phi)$ of dimension $g\in\{1,2,3\}$, then the bounds of \Cref{prop:cm-rank-bound} imply $\op{rank}(K,\Phi)=g+1$.
\end{example}
It turns out that one can upgrade the argument in the left inequality as follows.
\begin{proposition}
	Let $(K_0,\Phi_0)$ be a primitive CM type such that $[K_0:\QQ]=2p$ for an odd prime $p$. Then $\op{rank}(K_0,\Phi_0)=p+1$.
\end{proposition}
\begin{proof}
	We follow \cite[Theorem~2]{ribet-mt-av}. Let $K$ be a Galois closure of $K_0$ over $\QQ$, and set $G\coloneqq\op{Gal}(K/\QQ)$. We are interested in computing $\dim_\QQ\QQ[G]\Phi$, so we note \Cref{prop:cm-rank-bound} immediately upper-bounds this dimension by $p+1$. For the lower bound, we proceed in steps.
	\begin{enumerate}
		\item The key is to view $\QQ[G]\Phi$ as a $G$-module where $G$ acts on the left by multiplication. In particular, we claim that this map
		\[G\to\op{Aut}_\QQ\QQ[G]\Phi\]
		is injective: some $g\in G$ fixes $\QQ[G]\Phi$ if and only if $g\sigma\Phi=\sigma\Phi$ for all $\sigma\in G$. However, this is equivalent to $\sigma^{-1}g\sigma\Phi=\Phi$, which we see is equivalent to $\sigma^{-1}g\sigma$ fixing $K_0$ for all $\sigma$! In other words, we need $g$ to fix all embeddings of $K_0$ into $K$, so because $K$ is a Galois closure of $K_0$, this is equivalent to $g$ being the identity.

		\item This injectivity gets us most of the way: choose some $g\in G$ of order $p$ (which exists because $[K_0:\QQ]$ must divide the order of $G$), so we view $\QQ[G]\Phi$ as a $\langle g\rangle$-representation, which produces an eigenspace decomposition
		\[\QQ[G]\cong A\oplus B,\]
		where $g$ acts on $A$ nontrivially, and $g$ acts on $B$ nontrivially. Because $g$ acts on $\QQ[G]\Phi$ nontrivially, $A$ is nonzero, so $\dim_\QQ A\ge p-1$.

		\item It remains to show that $\dim_\QQ B\ge2$. Of course $\theta\coloneqq\sum_{\sigma\in G}\sigma$ is fixed by $G$, so the primary difficulty of the remainder of the proof is finding another vector fixed by $g$. It will turn out that $\left(1+g+\cdots+g^{p-1}\right)\Phi$ will do the trick, but this is not obvious. Undoing the arguments of \Cref{prop:mt-cm-torus}, we note that
		\[\frac{\QQ[G]\Phi}{\QQ[G]\Phi\cap\QQ\theta}=\frac{\im(\Phi\colon\QQ[G]\to\QQ[G])}{\QQ[G]\Phi\cap\QQ\theta}\cong\frac{\QQ[G]}{\{x\in\QQ[G]:x\Phi\in\QQ\theta\}}.\]
		Now, the arguments of \Cref{prop:mt-cm-torus} tell us that we have a well-defined map on this quotient defined by $\QQ[G]\to\QQ$ where $\sigma\mapsto1$ if $\sigma\in\Phi$ and $\sigma\mapsto-1$ otherwise. As such, $\left(1+g+\cdots+g^{p-1}\right)\Phi\notin\QQ\theta$ because $1+g+\cdots+g^{p-1}$ is nonzero in the quotient above because it is nonzero under the aforementioned map $\QQ[G]\to\QQ$. (Importantly, here we have used the fact that $p$ is odd!)
		\qedhere
	\end{enumerate}
\end{proof}
As a last example, we work with abelian extensions.
\begin{lemma} \label{lem:rank-cm-type-character}
	Let $(K,\Phi)$ be a CM type such that $K/\QQ$ is an abelian extension with Galois group $G$. Then $\op{rank}(K,\Phi)$ equals the number of characters $\chi\colon G\to\CC^\times$ such that $\chi(\Phi)\ne0$.
\end{lemma}
\begin{proof}
	We will compute $\op{rank}(K,\Phi)$ as $\dim_\CC\CC[G]\Phi$. One can diagonalize the $G$-action on $\CC[G]$ into
	\[\CC[G]\cong\bigoplus_\chi\CC_\chi,\]
	where $G$ acts on $\CC_\chi$ by $\chi$. Thus, $\QQ[G]\Phi$ will equal the sum of the spaces $\CC_\chi\Phi$, but $\CC_\chi\Phi$ is nonzero if and only if $\chi(\Phi)\ne0$.
\end{proof}
\begin{remark} \label{rem:rank-cm-even-character}
	Work in the setting of \Cref{lem:rank-cm-type-character}. Let $\iota\in G$ denote complex conjugation. If $\chi$ is a nontrivial character satisfying $\chi(\iota)=1$, then we see that
	\[0=\sum_{g\in G}\chi(g)=\chi(\Phi+\iota\Phi)=2\chi(\Phi),\]
	so $\chi(\Phi)=0$.
\end{remark}
\begin{example} \label{ex:p-cyclo-cm-rank}
	Fix a prime $p$, and define the CM type $\Phi$ on $\QQ(\zeta_p)$ by $\Phi=\left\{\zeta_p\mapsto\zeta_p^i:1\le i\le\frac{p-1}2\right\}$. We will show that $\op{rank}(\QQ(\zeta_p),\Phi)=p$ by following \cite[Section~4]{kubota-cm-type}. We use \Cref{lem:rank-cm-type-character}. In view of \Cref{rem:rank-cm-even-character}, it is enough to check that $\chi(\Phi)\ne0$ for each of the $\frac{p-1}2$ characters $\chi$ satisfying $\chi(\iota)=-1$. By identifying $\op{Gal}(\QQ(\zeta_p)/\QQ)$ with $(\ZZ/p\ZZ)^\times$, this reduces to computing sums of the form $\sum_{i=1}^{(p-1)/2}\chi(i)$ for characters $\chi$ satisfying $\chi(-1)=-1$. We relegate these computations to \Cref{lem:class-number-formula-chi} below.
\end{example}
\begin{lemma} \label{lem:class-number-formula-chi}
	Fix a character $\chi\colon(\ZZ/p\ZZ)^\times\to\CC^\times$ satisfying $\chi(-1)=-1$. Then
	\[\sum_{i=1}^{(p-1)/2}\chi(i)\ne0.\]
\end{lemma}
\begin{proof}
	We follow \cite[Lemma~4.3]{kubota-cm-type}. For brevity, define $g\coloneqq\frac{p-1}2$. The key input is to use the class number formula for cyclotomic fields. Indeed, by combining \cite[Proposition~4.1, Theorem~4.2, Corollary~4.4]{washington-cyclotomic-field}, we see that
	\[A\coloneqq\sum_{i=1}^gi\chi(i)\]
	is nonzero. We will transform this nonvanishing result into the required one. We begin by defining the family of sums
	\begin{align*}
		A_< &\coloneqq \sum_{i=1}^gi\chi(i), \\
		A_> &\coloneqq \sum_{i=g+1}^{p-1}i\chi(i), \\
		A_0 &\coloneqq \sum_{i=1}^g2i\chi(2i), \\
		A_1 &\coloneqq \sum_{i=1}^g(2i-1)\chi(2i-1), \\
		B_< &\coloneqq \sum_{i=1}^g\chi(i), \\
		B_1 &\coloneqq \sum_{i=1}^g\chi(2i-1).
	\end{align*}
	To continue, we describe some relations between these sums.
	\begin{itemize}
		\item One has $A=A_<+A_>=A_0+A_1$.
		\item Because $\chi(-1)=-1$, we can see that $A_>=A_<-pB_<$ by sending $i\mapsto(p-i)$ in the sum. Combining with the previous point, we see that $A=2A_<-pB_<$.
		\item On the other hand, considering $B_1$, we send $i\mapsto(p-i)$ to make the terms even and then factor out a factor of $2$ to show that $B_1=-\chi(2)B_<$.
		\item Similarly, considering $A_1$, we send $i\mapsto(p-i)$ to make the terms even and then factor our a factor of $2$ to show that $A_1=2\chi(2)A_<-p\chi(2)B_<$. Summing, we see $A=A_1+A_2=4\chi(2)A_<-p\chi(2)B_<$.
	\end{itemize}
	In total, we are able to see that
	\[4\chi(2)A_<-p\chi(2)B_<=A=2\chi(2)A_<-p\chi(2)B_<\]
	is a nonzero value. However, $B_<=0$ combined with the equality of the left and right sides would require $A_<=0$ and then $A=0$, which is a contradiction, as required.
\end{proof}

\subsection{A Nondegenerate Jacobian}
In this subsection, fix an odd prime $p$, and we study the Jacobian $J_p$ of the $\QQ$-curve $C_p\colon y^2=x^p-1$. The goal of the present subsection is to establish some basic facts about $J_p$. In particular, we will show that $J_p$ is absolutely simple of dimension $\frac{p-1}2$ and $\op{rank}J_p=\frac{p+1}2$.

A computation with the Riemann--Hurwitz formula (for general hyperelliptic curves) explains that the genus $g$ of $C_p$ is $\frac{p-1}2$, so we see $\dim J_p=\frac{p-1}2$. Note that $\langle\zeta_p\rangle$ acts on $C_p$ by $\zeta_p\cdot(x,y)\coloneqq(\zeta_px,y)$, so $J_p$ has an endomorphism of order $p$, so $\ZZ[\zeta_p]\subseteq\op{End}J_p$, so $J_p$ has complex multiplication by $\QQ(\zeta_p)$. Let's compute the CM type of $J_p$.
\begin{remark}
	If we were to work with $C_m\colon y^2=x^m-1$ for a general positive integer $m$, it still turns out that $J_m\coloneqq\op{Jac}C_m$ admits complex multiplication, but it is no longer enough for $\QQ(\zeta_m)\subseteq\op{End}^0J_m$ because $[\QQ(\zeta_m):\QQ]=\varphi(m)$ is less than $2\dim J_m=m-1$ when $m$ fails to be prime.
\end{remark}
\begin{lemma}
	The CM type of $J_p$ is given by $(\QQ(\zeta_p),\Phi)$, where
	\[\Phi\coloneqq\left\{\zeta_p\mapsto\zeta_p^i:1\le i\le\frac{p-1}2\right\}.\]
\end{lemma}
\begin{proof}
	We need to diagonalize the action of $\langle\zeta_p\rangle$ on $H^{10}(J_p)=H^0(J_p,\Omega^1_{J_p})$. It is a property of the Jacobian that
	\[H^0(J_p,\Omega^1_{J_p})\cong H^0(C_p,\Omega^1_{C_p}),\]
	so we may diagonalize the action of $\langle\zeta_p\rangle$ on the space of differentials on $C_p$. Well, one can check that $C_p\colon y^2=x^p-1$ has a basis of differentials given by $x^i\,dx/y$ where $i\in\left\{0,\ldots,\frac{p-3}2\right\}$; importantly, one ought to check that these differentials do not have poles at the points at infinity, which can be done by passing to the corresponding affine chart via $(x,y)\mapsto\left(1/u,v/u^{(p+1)/2}\right)$. Anyway, we conclude by noting that
	\[\zeta_p\cdot\frac{x^i\,dx}y=\zeta_p^{i+1}\frac{x^i\,dx}y,\]
	so the given $\Phi$ does in fact describe the diagonalization of our action on $H^{10}$.
\end{proof}
Thus, \Cref{ex:p-cyclo-cm-rank} explains that $\dim\op{MT}(A)=\op{rank}(\QQ(\zeta_p),\Phi)=p$, which forces $\op{MT}(A)=\op{Res}_{\QQ(\zeta_p)/\QQ}\mathbb G_m$.

Lastly, we check that $J_p$ is absolutely simple. It is enough to check that the CM type $(\QQ(\zeta_p),\Phi)$ is primitive.
\begin{lemma}
	The CM type $(\QQ(\zeta_p),\Phi)$ is primitive.
\end{lemma}
\begin{proof}
	The CM type is primitive if and only if $\sigma\Phi=\Phi$ implies $\sigma=\id$ for any $\sigma\in\op{Gal}(\QQ(\zeta_p)/\QQ)$. Denoting the $\QQ(\zeta_p)\to\QQ(\zeta_p)$ defined by $\zeta_p\mapsto\zeta_p^i$ by $\sigma_i$, we see that we would like to show that $\sigma_i\Phi=\Phi$ implies $i=1$. In other words, for any $i\ne1$, we would like to show that
	\[\left\{ai\pmod p:1\le a\le\frac{p-1}2\right\}\ne\left\{a\pmod p:1\le a\le\frac{p-1}2\right\}.\]
	For this, we follow \cite[Lemma~4.2]{goodson-fermat-av-degeneracy}. For $i>\frac{p-1}2$, we see that $i$ lives in the left-hand set but not in the right-hand set, so there is nothing to do. Otherwise, $i\le\frac{p-1}2$, so $\frac{g-1}{2i}\le\frac{g-1}i+1$, so we can find an integer $j$ in the interval $\left(\frac{g-1}{2i},\frac{g-1}i\right]$. But then $\frac{p-1}2<ij\le p-1$, so $ij$ is in the left-hand set but not in the right-hand set.
\end{proof}

% \section{Background on Motives}
% Throughout, $X$ denotes a smooth proper variety over a field $k$, which is possibly but not definitely algebraically closed.

\section{Basic Cases}
In this subsection, we work out some basic cases.
\begin{proposition} \label{prop:cm}
	Fix an abelian variety $A$ over a number field $K$ with CM by $E$. Then \Cref{conj:desired-conjecture} holds for $A$.
\end{proposition}
\begin{proof}
	The main point is that we are able to lift $\op{Frob}_\mf p$ to become an endomorphism of $A$.

	Let $\mc A$ be the N\'eron model of $A$ over $\OO_{K_\mf p}$, and let $\kappa\coloneqq\OO_K/\mf p$ be the residue field. The N\'eron mapping property implies $\op{End}_E(A)^\circ=\op{End}_E^\circ(\mc A)$, which then has a natural reduction map to $\op{End}_E^\circ(\mc A_\kappa)$. An argument on the Tate module tells us that
	\[\op{End}_E^\circ(A)\to\op{End}_E^\circ(\mc A_\kappa)\]
	is injective, but we see that both sides are free $E$-modules of rank $1$. Thus, this reduction map is an isomorphism, so $\op{Frob}_\mf p$ lifts from an endomorphism on $\mc A_\kappa$ to an endomorphism on $A$.

	We now note that the diagram
	% https://q.uiver.app/#q=WzAsNCxbMCwwLCJIXjFfQihBO1xcUVEpXFxvdGltZXNfXFxRUVxcUVFfXFxlbGwiXSxbMSwwLCJIXjFfQihBO1xcUVEpXFxvdGltZXNfXFxRUVxcUVFfXFxlbGwiXSxbMCwxLCJIXjFfe1xcbWF0aHJte1xcYWN1dGUgZXR9fShBO1xcUVFfXFxlbGwpIl0sWzEsMSwiSF4xX3tcXG1hdGhybXtcXGFjdXRlIGV0fX0oQTtcXFFRX1xcZWxsKSJdLFswLDEsIkheMV9CKEYpIl0sWzIsMywiXFxyaG9fXFxlbGwoXFxvcHtGcm9ifV9cXG1mIHApIl0sWzAsMl0sWzEsM11d&macro_url=https%3A%2F%2Fraw.githubusercontent.com%2FdFoiler%2Fnotes%2Fmaster%2Fnir.tex
	\[\begin{tikzcd}
		{H^1_B(A;\QQ)\otimes_\QQ\QQ_\ell} & {H^1_B(A;\QQ)\otimes_\QQ\QQ_\ell} \\
		{H^1_{\mathrm{\acute et}}(A;\QQ_\ell)} & {H^1_{\mathrm{\acute et}}(A;\QQ_\ell)}
		\arrow["{H^1_B(F)}", from=1-1, to=1-2]
		\arrow[from=1-1, to=2-1]
		\arrow[from=1-2, to=2-2]
		\arrow["{\rho_\ell(\mathrm{Frob}_\mf p)}", from=2-1, to=2-2]
	\end{tikzcd}\]
	commutes by the functoriality of the applied comparison isomorphism (and the definition of $F$), so the result follows. Perhaps one should check that $H^1_B(F)\in G(A)$, but this follows because endomorphisms must preserve the Hodge structure, so $F$ will send Hodge cycles to Hodge cycles (and thus send absolute Hodge cycles to absolute Hodge cycles).
\end{proof}
\begin{proposition}
	Fix an elliptic curve $A$ over a number field. Then \Cref{conj:desired-conjecture} holds for $A$.
\end{proposition}
\begin{proof}
	If $A$ has complex multiplication, we are done by \Cref{prop:cm}. This leaves us with two cases.
	\begin{itemize}
		\item Suppose $A_\CC$ still has no complex multiplication. Then $\mathrm{MT}(A)$ is $\op{GL}_{2,\QQ}$, so the result follows from classical considerations.
		\item Suppose $A_\CC$ is CM so that $A$ has potential CM. For brevity, define $V\coloneqq H^1(A;\QQ)$. Note that $A_L$ has CM for some quadratic extension $L$ of $K$, so we produce a short exact sequence
		\[1\to\op{MT}(A)\to G(A)\to\op{Gal}(L/K)\to1.\]
		Note $\op{MT}(A)$ is a torus, so $V_\CC$ decomposes into two eigenspaces $V_\CC=V^1_\CC\oplus V^2_\CC$; considering the rank of $\op{MT}(A)$, we see that $\sigma\in\op{MT}(A)$ if and only if $\sigma_\CC\colon V_\CC\to V_L$ sends $V^1_\CC$ and $V^2_\CC$ to themselves. Thus, choosing some $c\in G(A)$ to lift the generator of $\op{Gal}(L/K)$, we see that $c$ must normalize $\op{MT}(A)$ while not actually living in $\op{MT}(A)$, and the only way for this to happen is for $c_\CC$ to swap $V^1_\CC$ and $V^2_\CC$ (possibly adding a scalar in the process to ensure that $c$ is defined over $\QQ$).
		
		This will be enough to complete the proof. Letting $q$ be the cardinality of $\OO_K/\mf p$, we know that $\rho_\ell(\mathrm{Frob}_\mf p)$ is semisimple with characteristic polynomial $P_\mf p(x)\in\QQ[x]$ not depending on $\ell$. The point is that the eigenvalues $\alpha_{1,\ell}$ and $\alpha_{2,\ell}$ of $\rho_\ell(\op{Frob}_\mf p)$ on $V^1_\CC$ and $V^2_\CC$ may not be determined up to order, but the set of eigenvalues $\{\alpha_{1,\ell},\alpha_{2,\ell}\}$ is independent of $\ell$. Conjugation by $c$ is able to swap the two eigenspaces, so we see that the conjugacy class of $\rho_\ell(\op{Frob}_\mf p)$ is now independent of $\ell$.
		\qedhere
	\end{itemize}
\end{proof}
\begin{remark}
	It may appear that one can upgrade this second proof to work for arbitrary abelian varieties with potential CM, but this is not the case. Indeed, the given proof only functions because $\op{Gal}(L/K)$ acts simply transitively on the eigenspaces of $\op{MT}(A)$ acting on $V_\CC$. However, $G(A)\subseteq\op{GSp}_{2\dim A}(\QQ)$, so one cannot hope for the normalizer of a torus to be large enough in general.
\end{remark}

\end{document}

% now that we know the frobenii live in the same connected component, one might be able to upgrade noot's weakly neat to merely require that some prescribed power is weakly neat

% galois commutes with complex multiplication only over the reflex field
% reason: complex multiplication is defined over the reflex field, so conjugating by Galois won't do anything!